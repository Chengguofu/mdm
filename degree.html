<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å­¦ä½ç®¡ç† - ä¸»æ•°æ®ç®¡ç†å¹³å°</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <style>
    :root {
      --theme-bg: #f7faff;
      --theme-topbar: linear-gradient(90deg, #2176c7 60%, #3ba1e3 100%);
      --theme-sidebar: #fff;
      --theme-content: #f4f8fb;
      --theme-topbar-font: #fff;
      --theme-menu-active: #2176c7;
      --theme-menu-hover: #185a99;
      --theme-table-header: #f4f8fb;
      --theme-table-header-font: #2176c7;
      --theme-table-row-hover: #f0f6fd;
      --theme-table-border: #e3eaf3;
      --theme-btn: #2176c7;
      --theme-btn-hover: #185a99;
      --theme-avatar-bg: #eaf3fb;
      --theme-avatar-font: #2176c7;
      --theme-content-text: #185a99;
      --theme-shadow-color: rgba(33, 118, 199, 0.06);
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', 'Microsoft YaHei', Arial, sans-serif;
      background: var(--theme-bg);
      color: #222;
    }

    .layout {
      display: flex;
      height: 100vh;
      flex-direction: column;
    }

    .topbar {
      height: 56px;
      background: var(--theme-topbar);
      color: var(--theme-topbar-font);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 32px;
      font-size: 20px;
      font-weight: 600;
      letter-spacing: 1px;
      box-shadow: 0 2px 8px rgba(33, 118, 199, 0.08);
      z-index: 10;
      position: relative;
    }

    .topbar-left {
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .logo {
      width: 120px;
      height: 36px;
      background: transparent;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      color: #2176c7;
      font-weight: bold;
      margin-right: 8px;
    }

    .topbar-title {
      font-size: 20px;
      font-weight: 600;
      color: var(--theme-topbar-font);
      letter-spacing: 1px;
    }

    .topbar-right {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 15px;
    }

    .back-btn {
      background: rgba(255,255,255,0.13);
      border: none;
      border-radius: 16px;
      padding: 2px 18px;
      font-size: 15px;
      color: #fff;
      margin-right: 4px;
      letter-spacing: 1px;
      font-weight: 500;
      display: flex;
      align-items: center;
      height: 32px;
      cursor: pointer;
      transition: background 0.18s;
    }

    .back-btn:hover {
      background: rgba(255,255,255,0.2);
    }

    .content {
      flex: 1;
      padding: 24px;
      overflow-y: auto;
    }

    .model-tabs-bar {
      display: flex;
      gap: 2px;
      border-bottom: 1.5px solid #e3eaf3;
      margin-bottom: 18px;
    }

    .model-tab {
      padding: 12px 28px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      color: #185a99;
      transition: all 0.2s;
    }

    .model-tab.active {
      color: #2176c7;
      border-bottom: 2px solid #2176c7;
    }

    .model-tab:hover:not(.active) {
      background: #f0f6fd;
    }

    .action-bar {
      display: flex;
      gap: 10px;
      margin-bottom: 18px;
      align-items: center;
    }

    .btn-main {
      background: var(--theme-btn);
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px 16px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.18s;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .btn-main:hover {
      background: var(--theme-btn-hover);
    }

    .btn-line {
      background: #fff;
      color: var(--theme-btn);
      border: 1px solid var(--theme-btn);
      border-radius: 6px;
      padding: 8px 16px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.18s;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .btn-line:hover {
      background: var(--theme-btn);
      color: #fff;
    }

    .export-dropdown {
      position: relative;
      display: inline-block;
    }

    .export-menu {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background: #fff;
      border: 1px solid #e3eaf3;
      border-radius: 6px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 1000;
      min-width: 140px;
      margin-top: 4px;
    }

    .export-menu-item {
      padding: 10px 16px;
      cursor: pointer;
      border-bottom: 1px solid #f0f0f0;
      font-size: 14px;
      color: #333;
      transition: background 0.2s;
    }

    .export-menu-item:hover {
      background: #f0f6fd;
    }

    .export-menu-item:last-child {
      border-bottom: none;
    }

    .table-wrap {
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(33, 118, 199, 0.08);
      overflow: hidden;
    }

    .model-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }

    .model-table th {
      background: var(--theme-table-header);
      color: var(--theme-table-header-font);
      font-weight: 600;
      padding: 12px 16px;
      text-align: left;
      border-bottom: 1px solid var(--theme-table-border);
      font-size: 14px;
    }

    .model-table td {
      padding: 12px 16px;
      border-bottom: 1px solid var(--theme-table-border);
      color: #333;
    }

    .model-table tbody tr:hover {
      background: var(--theme-table-row-hover);
    }

    .checkbox-cell {
      width: 36px;
      text-align: center;
    }

    .checkbox-cell input[type="checkbox"] {
      width: 16px;
      height: 16px;
    }

    .modal-mask {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.3);
      z-index: 2000;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: #fff;
      border-radius: 8px;
      max-width: 900px;
      width: 90vw;
      max-height: 90vh;
      overflow: auto;
      box-shadow: 0 4px 24px rgba(33,118,199,0.13);
      position: relative;
    }

    .version-link {
      color: #2176c7;
      text-decoration: none;
      font-weight: 500;
      cursor: pointer;
    }

    .version-link:hover {
      text-decoration: underline;
    }

    .drawer-mask {
      display: none;
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      z-index: 4000;
      background: rgba(0,0,0,0.10);
    }

    .drawer {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      width: 420px;
      max-width: 98vw;
      background: #fff;
      box-shadow: -2px 0 16px rgba(33,118,199,0.18);
      z-index: 4100;
      display: flex;
      flex-direction: column;
      animation: drawerIn .25s;
    }

    @keyframes drawerIn {
      from {
        right: -440px;
        opacity: 0;
      }
      to {
        right: 0;
        opacity: 1;
      }
    }

    .icon {
      display: inline-block;
      vertical-align: middle;
    }
  </style>
</head>
<body>
  <div class="layout">
    <div class="topbar">
      <div class="topbar-left">
        <div class="logo">ä¸»æ•°æ®ç®¡ç†å¹³å°</div>
        <div class="topbar-title">å­¦ä½ç®¡ç†</div>
      </div>
      <div class="topbar-right">
        <button class="back-btn" onclick="goBack()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
          </svg>
          è¿”å›é¦–é¡µ
        </button>
      </div>
    </div>
    
    <div class="content">
      <div class="model-tabs-bar">
        <div class="model-tab active" data-tab="query">æŸ¥è¯¢</div>
        <div class="model-tab" data-tab="apply">ç”³è¯·</div>
        <div class="model-tab" data-tab="edit">ä¿®æ”¹</div>
        <div class="model-tab" data-tab="freeze">å†»ç»“</div>
        <div class="model-tab" data-tab="unfreeze">è§£å†»</div>
        <div class="model-tab" data-tab="audit">å®¡æ ¸</div>
        <div class="model-tab" data-tab="archive">å½’æ¡£</div>
        <div class="model-tab" data-tab="search">æ£€ç´¢</div>
      </div>
      
      <div class="model-tab-content" id="degreeTabContent">
        <!-- å­¦ä½æŸ¥è¯¢é¡µé¢å†…å®¹ -->
      </div>
    </div>
  </div>

  <!-- ç‰ˆæœ¬åˆ—è¡¨å¯¹è¯æ¡† -->
  <div id="versionModal" class="modal-mask">
    <div class="modal-content">
      <div style="background:#185a99;color:#fff;font-size:20px;font-weight:500;padding:16px 24px;border-radius:8px 8px 0 0;">
        ç‰ˆæœ¬åˆ—è¡¨ - <span id="versionModalTitle">å»ºç­‘å­¦å­¦å£«</span>
        <span style='position:absolute;right:24px;top:16px;cursor:pointer;font-size:24px;' id="versionModalClose">Ã—</span>
      </div>
      <div style="padding:24px;">
        <div style="margin-bottom:20px; display:flex; justify-content:flex-end; align-items:center;">
          <button class="btn-main" id="versionCompareBtn" style="margin-right:0;">
            <span class="icon">ğŸ“Š</span>ç‰ˆæœ¬æ¯”è¾ƒ
          </button>
        </div>
        <!-- å¿«é€ŸæŸ¥è¯¢æ  -->
        <div style="margin-bottom:12px;display:flex;align-items:center;gap:8px;">
          <input id="versionQuickSearchInput" type="text" placeholder="å¿«é€ŸæŸ¥è¯¢ï¼šå­¦ä½æè¿°/ä»£ç /åˆ›å»ºäºº..." style="width:50%;min-width:180px;padding:6px 10px;border:1px solid #e3eaf3;border-radius:4px;">
          <button id="versionQuickSearchBtn" class="btn-main" style="padding:6px 18px;">æŸ¥è¯¢</button>
        </div>
        <div class="table-wrap">
          <table class="model-table">
            <thead>
              <tr>
                <th class="checkbox-cell"><input type="checkbox" id="versionSelectAll"></th>
                <th>çŠ¶æ€</th>
                <th>ä»£ç </th>
                <th>å­¦ä½æè¿°</th>
                <th>æ•°æ®ç‰ˆæœ¬</th>
                <th>é”™è¯¯æç¤º</th>
                <th>åˆ›å»ºäºº</th>
                <th>åˆ›å»ºäººå•ä½</th>
                <th>åˆ›å»ºæ—¶é—´</th>
                <th>å®¡æ ¸äºº</th>
                <th>å‘å¸ƒäººå•ä½</th>
                <th>å‘å¸ƒæ—¶é—´</th>
                <th style="text-align:center;">æ“ä½œ</th>
              </tr>
            </thead>
            <tbody id="versionTableBody">
              <!-- ç‰ˆæœ¬æ•°æ®è¡Œ -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- å­¦ä½è¯¦æƒ…æŠ½å±‰ -->
  <div id="degreeDetailDrawerMask" class="drawer-mask">
    <div class="drawer">
      <div style="padding:18px 24px;font-size:18px;font-weight:600;color:#2176c7;border-bottom:1px solid #e3eaf3;display:flex;align-items:center;justify-content:space-between;">
        å­¦ä½è¯¦æƒ…
        <button id="degreeDetailDrawerClose" style="background:none;border:none;font-size:22px;color:#999;cursor:pointer;">Ã—</button>
      </div>
      <div id="degreeDetailContent" style="flex:1;padding:24px;overflow-y:auto;font-size:16px;color:#222;">
        <!-- è¯¦æƒ…å†…å®¹å¡«å……åœ¨è¿™é‡Œ -->
      </div>
    </div>
  </div>

  <!-- å­¦ä½ç”³è¯·ç¼–è¾‘æŠ½å±‰ -->
  <div id="degreeApplyDrawerMask" class="drawer-mask">
    <div class="drawer">
      <div style="padding:18px 24px;font-size:18px;font-weight:600;color:#2176c7;border-bottom:1px solid #e3eaf3;display:flex;align-items:center;justify-content:space-between;">
        <span id="degreeApplyDrawerTitle">æ–°å¢å­¦ä½ç”³è¯·</span>
        <button id="degreeApplyDrawerClose" style="background:none;border:none;font-size:22px;color:#999;cursor:pointer;">Ã—</button>
      </div>
      <div id="degreeApplyContent" style="flex:1;padding:24px;overflow-y:auto;font-size:16px;color:#222;">
        <form id="degreeApplyForm">
          <div style="margin-bottom: 24px;">
            <h3 style="color: #2176c7; margin-bottom: 16px; font-size: 16px;">åŸºæœ¬ä¿¡æ¯</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
              <div>
                <label style="display: block; font-weight: 500; color: #666; margin-bottom: 8px;">å­¦ä½ä»£ç  <span style="color: #f5222d;">*</span></label>
                <input type="text" id="degreeCode" name="degreeCode" style="width: 100%; padding: 8px 12px; border: 1px solid #d9d9d9; border-radius: 4px; font-size: 14px;" placeholder="è¯·è¾“å…¥å­¦ä½ä»£ç " required>
              </div>
              <div>
                <label style="display: block; font-weight: 500; color: #666; margin-bottom: 8px;">å­¦ä½æè¿° <span style="color: #f5222d;">*</span></label>
                <input type="text" id="degreeDescription" name="degreeDescription" style="width: 100%; padding: 8px 12px; border: 1px solid #d9d9d9; border-radius: 4px; font-size: 14px;" placeholder="è¯·è¾“å…¥å­¦ä½æè¿°" required>
              </div>
              <div>
                <label style="display: block; font-weight: 500; color: #666; margin-bottom: 8px;">è‹±æ–‡åç§°</label>
                <input type="text" id="degreeEnglishName" name="degreeEnglishName" style="width: 100%; padding: 8px 12px; border: 1px solid #d9d9d9; border-radius: 4px; font-size: 14px;" placeholder="è¯·è¾“å…¥è‹±æ–‡åç§°">
              </div>
              <div>
                <label style="display: block; font-weight: 500; color: #666; margin-bottom: 8px;">å­¦ä½ç±»å‹</label>
                <select id="degreeType" name="degreeType" style="width: 100%; padding: 8px 12px; border: 1px solid #d9d9d9; border-radius: 4px; font-size: 14px;">
                  <option value="">è¯·é€‰æ‹©å­¦ä½ç±»å‹</option>
                  <option value="å­¦å£«">å­¦å£«</option>
                  <option value="ç¡•å£«">ç¡•å£«</option>
                  <option value="åšå£«">åšå£«</option>
                </select>
              </div>
            </div>
          </div>
          
          <div style="margin-bottom: 24px;">
            <h3 style="color: #2176c7; margin-bottom: 16px; font-size: 16px;">åˆ†ç±»ä¿¡æ¯</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
              <div>
                <label style="display: block; font-weight: 500; color: #666; margin-bottom: 8px;">å­¦ç§‘é—¨ç±»</label>
                <select id="subjectCategory" name="subjectCategory" style="width: 100%; padding: 8px 12px; border: 1px solid #d9d9d9; border-radius: 4px; font-size: 14px;">
                  <option value="">è¯·é€‰æ‹©å­¦ç§‘é—¨ç±»</option>
                  <option value="å“²å­¦">å“²å­¦</option>
                  <option value="ç»æµå­¦">ç»æµå­¦</option>
                  <option value="æ³•å­¦">æ³•å­¦</option>
                  <option value="æ•™è‚²å­¦">æ•™è‚²å­¦</option>
                  <option value="æ–‡å­¦">æ–‡å­¦</option>
                  <option value="å†å²å­¦">å†å²å­¦</option>
                  <option value="ç†å­¦">ç†å­¦</option>
                  <option value="å·¥å­¦">å·¥å­¦</option>
                  <option value="å†œå­¦">å†œå­¦</option>
                  <option value="åŒ»å­¦">åŒ»å­¦</option>
                  <option value="ç®¡ç†å­¦">ç®¡ç†å­¦</option>
                  <option value="è‰ºæœ¯å­¦">è‰ºæœ¯å­¦</option>
                </select>
              </div>
              <div>
                <label style="display: block; font-weight: 500; color: #666; margin-bottom: 8px;">ä¸€çº§å­¦ç§‘</label>
                <select id="firstLevelSubject" name="firstLevelSubject" style="width: 100%; padding: 8px 12px; border: 1px solid #d9d9d9; border-radius: 4px; font-size: 14px;">
                  <option value="">è¯·é€‰æ‹©ä¸€çº§å­¦ç§‘</option>
                </select>
              </div>
            </div>
          </div>
          
          <div style="margin-bottom: 24px;">
            <h3 style="color: #2176c7; margin-bottom: 16px; font-size: 16px;">å…¶ä»–ä¿¡æ¯</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
              <div>
                <label style="display: block; font-weight: 500; color: #666; margin-bottom: 8px;">æ˜¯å¦æœ‰æ•ˆ</label>
                <select id="isValid" name="isValid" style="width: 100%; padding: 8px 12px; border: 1px solid #d9d9d9; border-radius: 4px; font-size: 14px;">
                  <option value="1">æ˜¯</option>
                  <option value="0">å¦</option>
                </select>
              </div>
              <div>
                <label style="display: block; font-weight: 500; color: #666; margin-bottom: 8px;">æ’åºå·</label>
                <input type="number" id="sortOrder" name="sortOrder" style="width: 100%; padding: 8px 12px; border: 1px solid #d9d9d9; border-radius: 4px; font-size: 14px;" placeholder="è¯·è¾“å…¥æ’åºå·">
              </div>
            </div>
            <div style="margin-top: 16px;">
              <label style="display: block; font-weight: 500; color: #666; margin-bottom: 8px;">å¤‡æ³¨</label>
              <textarea id="remarks" name="remarks" style="width: 100%; padding: 8px 12px; border: 1px solid #d9d9d9; border-radius: 4px; font-size: 14px; min-height: 80px; resize: vertical;" placeholder="è¯·è¾“å…¥å¤‡æ³¨ä¿¡æ¯"></textarea>
            </div>
          </div>
          
          <div style="display: flex; gap: 12px; justify-content: flex-end; padding-top: 24px; border-top: 1px solid #f0f0f0;">
            <button type="button" id="degreeApplyCancelBtn" style="padding: 8px 16px; border: 1px solid #d9d9d9; background: #fff; color: #666; border-radius: 4px; cursor: pointer; font-size: 14px;">å–æ¶ˆ</button>
            <button type="submit" id="degreeApplySaveBtn" style="padding: 8px 16px; border: none; background: #2176c7; color: #fff; border-radius: 4px; cursor: pointer; font-size: 14px;">ä¿å­˜</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
      renderDegreeQueryTab();
      bindDegreeTabEvents();
      bindVersionEvents();
      bindExportEvents();
    });

    function goBack() {
      window.history.back();
    }

    function renderDegreeQueryTab(showQueryBar = false) {
      const tabContent = document.getElementById('degreeTabContent');
      tabContent.innerHTML = `
        <div class="action-bar">
          <button class="btn-main" id="degreeQuickSearchBtn" onclick="quickSearchQuery()"><span class="icon">ğŸ”</span>å¿«é€ŸæŸ¥è¯¢</button>
          <button class="btn-line" id="degreeAdvancedSearchBtn" onclick="advancedSearchQuery()"><span class="icon">ğŸ“„</span>é«˜çº§æŸ¥è¯¢</button>
          <div class="export-dropdown">
            <button class="btn-main" id="degreeExportBtn" style="display:flex;align-items:center;gap:4px;">
              <span class="icon">ğŸ“¤</span>å¯¼å‡º
              <span style="font-size:12px;">â–¼</span>
            </button>
            <div id="degreeExportMenu" class="export-menu">
              <div class="export-menu-item" data-export-type="selected">
                <span class="icon">â˜‘ï¸</span>å¯¼å‡ºå‹¾é€‰æ•°æ®
              </div>
              <div class="export-menu-item" data-export-type="all">
                <span class="icon">ğŸ“‹</span>å¯¼å‡ºå…¨éƒ¨æ•°æ®
              </div>
            </div>
          </div>
        </div>
        <div class="table-wrap">
          <table class="model-table">
            <thead>
              <tr>
                <th class="checkbox-cell"><input type="checkbox" id="degreeSelectAll"></th>
                <th>çŠ¶æ€</th>
                <th>ä»£ç </th>
                <th>å­¦ä½æè¿°</th>
                <th>æ•°æ®ç‰ˆæœ¬</th>
                <th>é”™è¯¯æç¤º</th>
                <th>åˆ›å»ºäºº</th>
                <th>åˆ›å»ºäººå•ä½</th>
                <th>åˆ›å»ºæ—¶é—´</th>
                <th>å®¡æ ¸äºº</th>
                <th>å‘å¸ƒäººå•ä½</th>
                <th>å‘å¸ƒæ—¶é—´</th>
                <th style="text-align:center;">æ“ä½œ</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeSelect" value="444"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#e6fff5;color:#13c2c2;font-weight:500;font-size:15px;">æ­£å¸¸</span></td>
                <td style="font-weight:600;">444</td>
                <td>å»ºç­‘å­¦å­¦å£«</td>
                <td><a href="#" class="version-link" data-code="444" style="color:#2176c7;text-decoration:none;font-weight:500;">2</a></td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <button style="background:none;border:none;color:#2176c7;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="showDegreeDetail('444', 'å»ºç­‘å­¦å­¦å£«')">æŸ¥çœ‹è¯¦æƒ…</button>
                </td>
              </tr>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeSelect" value="445"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#e6fff5;color:#13c2c2;font-weight:500;font-size:15px;">æ­£å¸¸</span></td>
                <td style="font-weight:600;">445</td>
                <td>è‰ºæœ¯å­¦å­¦å£«</td>
                <td>1</td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <button style="background:none;border:none;color:#2176c7;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="showDegreeDetail('445', 'è‰ºæœ¯å­¦å­¦å£«')">æŸ¥çœ‹è¯¦æƒ…</button>
                </td>
              </tr>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeSelect" value="490"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#e6fff5;color:#13c2c2;font-weight:500;font-size:15px;">æ­£å¸¸</span></td>
                <td style="font-weight:600;">490</td>
                <td>æ”¿æ²»ç»æµå­¦...</td>
                <td><a href="#" class="version-link" data-code="490" style="color:#2176c7;text-decoration:none;font-weight:500;">3</a></td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <button style="background:none;border:none;color:#2176c7;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="showDegreeDetail('490', 'æ”¿æ²»ç»æµå­¦')">æŸ¥çœ‹è¯¦æƒ…</button>
                </td>
              </tr>
            </tbody>
          </table>
          <div style="display:flex;justify-content:flex-end;align-items:center;gap:8px;margin-top:18px;padding: 0 16px 16px;">
            <button class="btn-line">ä¸Šä¸€é¡µ</button>
            <span style="font-size:15px;color:#333;">ç¬¬ <b>1</b> / 3 é¡µ</span>
            <button class="btn-main">ä¸‹ä¸€é¡µ</button>
          </div>
        </div>
      `;
    }

    // ç”³è¯·é¡µç­¾æ¸²æŸ“å‡½æ•°
    function renderDegreeApplyTab() {
      const tabContent = document.getElementById('degreeTabContent');
      tabContent.innerHTML = `
        <div class="action-bar">
          <button class="btn-main" id="degreeApplyQuickSearchBtn" onclick="quickSearchApply()"><span class="icon">ğŸ”</span>å¿«é€ŸæŸ¥è¯¢</button>
          <button class="btn-line" id="degreeApplyAdvancedSearchBtn" onclick="advancedSearchApply()"><span class="icon">ğŸ“„</span>é«˜çº§æŸ¥è¯¢</button>
          <button class="btn-main" id="degreeApplyAddBtn" onclick="addDegreeApply()"><span class="icon">â•</span>æ–°å¢</button>
          <button class="btn-line" id="degreeApplyDeleteBtn" onclick="deleteDegreeApply()"><span class="icon">ğŸ—‘ï¸</span>åˆ é™¤</button>
          <button class="btn-line" id="degreeApplyTemplateBtn" onclick="exportApplyTemplate()"><span class="icon">ğŸ“‹</span>ç”³è¯·æ¨¡ç‰ˆå¯¼å‡º</button>
          <button class="btn-line" id="degreeApplyImportBtn" onclick="importApplyData()"><span class="icon">ğŸ“¥</span>æ‰¹é‡ç”³è¯·å¯¼å…¥</button>
          <button class="btn-line" id="degreeApplyExportBtn" onclick="exportApplyData()"><span class="icon">ğŸ“¤</span>æ•°æ®å¯¼å‡º</button>
          <button class="btn-main" id="degreeApplySubmitBtn" onclick="submitDegreeApply()"><span class="icon">âœ…</span>æäº¤</button>
          <button class="btn-line" id="degreeApplyCopyBtn" onclick="copyDegreeApply()"><span class="icon">ğŸ“‹</span>å¤åˆ¶</button>
        </div>
        <div class="table-wrap">
          <table class="model-table">
            <thead>
              <tr>
                <th class="checkbox-cell"><input type="checkbox" id="degreeApplySelectAll"></th>
                <th>çŠ¶æ€</th>
                <th>ä»£ç </th>
                <th>å­¦ä½æè¿°</th>
                <th>æ•°æ®ç‰ˆæœ¬</th>
                <th>é”™è¯¯æç¤º</th>
                <th>åˆ›å»ºäºº</th>
                <th>åˆ›å»ºäººå•ä½</th>
                <th>åˆ›å»ºæ—¶é—´</th>
                <th>å®¡æ ¸äºº</th>
                <th>å‘å¸ƒäººå•ä½</th>
                <th>å‘å¸ƒæ—¶é—´</th>
                <th style="text-align:center;">æ“ä½œ</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeApplySelect" value="444"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#fff7e6;color:#fa8c16;font-weight:500;font-size:15px;">å¾…ç”³è¯·</span></td>
                <td style="font-weight:600;">444</td>
                <td>å»ºç­‘å­¦å­¦å£«</td>
                <td><a href="#" class="version-link-apply" data-code="444" style="color:#2176c7;text-decoration:none;font-weight:500;">2</a></td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:8px;justify-content:center;">
                    <button style="background:none;border:none;color:#2176c7;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="editDegreeApply('444')">ç¼–è¾‘</button>
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="deleteDegreeApplyRow('444')">åˆ é™¤</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeApplySelect" value="445"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#fff7e6;color:#fa8c16;font-weight:500;font-size:15px;">å¾…ç”³è¯·</span></td>
                <td style="font-weight:600;">445</td>
                <td>è‰ºæœ¯å­¦å­¦å£«</td>
                <td>1</td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:8px;justify-content:center;">
                    <button style="background:none;border:none;color:#2176c7;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="editDegreeApply('445')">ç¼–è¾‘</button>
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="deleteDegreeApplyRow('445')">åˆ é™¤</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeApplySelect" value="490"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#fff7e6;color:#fa8c16;font-weight:500;font-size:15px;">å¾…ç”³è¯·</span></td>
                <td style="font-weight:600;">490</td>
                <td>æ”¿æ²»ç»æµå­¦...</td>
                <td><a href="#" class="version-link-apply" data-code="490" style="color:#2176c7;text-decoration:none;font-weight:500;">3</a></td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:8px;justify-content:center;">
                    <button style="background:none;border:none;color:#2176c7;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="editDegreeApply('490')">ç¼–è¾‘</button>
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="deleteDegreeApplyRow('490')">åˆ é™¤</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <div style="display:flex;justify-content:flex-end;align-items:center;gap:8px;margin-top:18px;padding: 0 16px 16px;">
            <button class="btn-line">ä¸Šä¸€é¡µ</button>
            <span style="font-size:15px;color:#333;">ç¬¬ <b>1</b> / 3 é¡µ</span>
            <button class="btn-main">ä¸‹ä¸€é¡µ</button>
          </div>
        </div>
      `;
      
      // ç»‘å®šç”³è¯·é¡µç­¾çš„å…¨é€‰åŠŸèƒ½
      const selectAllCheckbox = document.getElementById('degreeApplySelectAll');
      if (selectAllCheckbox) {
        selectAllCheckbox.onchange = function() {
          const checkboxes = document.querySelectorAll('input[name="degreeApplySelect"]');
          checkboxes.forEach(cb => cb.checked = this.checked);
        };
      }
    }

    // ä¿®æ”¹é¡µç­¾æ¸²æŸ“å‡½æ•°
    function renderDegreeEditTab() {
      const tabContent = document.getElementById('degreeTabContent');
      tabContent.innerHTML = `
        <div class="action-bar">
          <button class="btn-main" id="degreeEditQuickSearchBtn" onclick="quickSearchEdit()"><span class="icon">ğŸ”</span>å¿«é€ŸæŸ¥è¯¢</button>
          <button class="btn-line" id="degreeEditAdvancedSearchBtn" onclick="advancedSearchEdit()"><span class="icon">ğŸ“„</span>é«˜çº§æŸ¥è¯¢</button>
          <button class="btn-main" id="degreeEditSelectDataBtn" onclick="selectEditData()"><span class="icon">â˜‘ï¸</span>é€‰æ‹©æ•°æ®</button>
          <button class="btn-line" id="degreeEditDeleteBtn" onclick="deleteEditData()"><span class="icon">ğŸ—‘ï¸</span>åˆ é™¤</button>
          <button class="btn-line" id="degreeEditTemplateBtn" onclick="exportEditTemplate()"><span class="icon">ğŸ“‹</span>æ‰¹é‡ä¿®æ”¹æ¨¡ç‰ˆå¯¼å‡º</button>
          <button class="btn-line" id="degreeEditImportBtn" onclick="importEditData()"><span class="icon">ğŸ“¥</span>æ‰¹é‡ä¿®æ”¹å¯¼å…¥</button>
          <button class="btn-line" id="degreeEditExportBtn" onclick="exportEditData()"><span class="icon">ğŸ“¤</span>æ•°æ®å¯¼å‡º</button>
          <button class="btn-main" id="degreeEditSubmitBtn" onclick="submitEditData()"><span class="icon">âœ…</span>æäº¤</button>
        </div>
        <div class="table-wrap">
          <table class="model-table">
            <thead>
              <tr>
                <th class="checkbox-cell"><input type="checkbox" id="degreeEditSelectAll"></th>
                <th>çŠ¶æ€</th>
                <th>ä»£ç </th>
                <th>å­¦ä½æè¿°</th>
                <th>æ•°æ®ç‰ˆæœ¬</th>
                <th>é”™è¯¯æç¤º</th>
                <th>åˆ›å»ºäºº</th>
                <th>åˆ›å»ºäººå•ä½</th>
                <th>åˆ›å»ºæ—¶é—´</th>
                <th>å®¡æ ¸äºº</th>
                <th>å‘å¸ƒäººå•ä½</th>
                <th>å‘å¸ƒæ—¶é—´</th>
                <th style="text-align:center;">æ“ä½œ</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeEditSelect" value="444"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#e6fff5;color:#13c2c2;font-weight:500;font-size:15px;">æ­£å¸¸</span></td>
                <td style="font-weight:600;">444</td>
                <td>å»ºç­‘å­¦å­¦å£«</td>
                <td><a href="#" class="version-link-edit" data-code="444" style="color:#2176c7;text-decoration:none;font-weight:500;">2</a></td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:8px;justify-content:center;">
                    <button style="background:none;border:none;color:#2176c7;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="editDegreeEdit('444')">ç¼–è¾‘</button>
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="deleteDegreeEditRow('444')">åˆ é™¤</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeEditSelect" value="445"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#e6fff5;color:#13c2c2;font-weight:500;font-size:15px;">æ­£å¸¸</span></td>
                <td style="font-weight:600;">445</td>
                <td>è‰ºæœ¯å­¦å­¦å£«</td>
                <td>1</td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:8px;justify-content:center;">
                    <button style="background:none;border:none;color:#2176c7;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="editDegreeEdit('445')">ç¼–è¾‘</button>
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="deleteDegreeEditRow('445')">åˆ é™¤</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeEditSelect" value="490"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#e6fff5;color:#13c2c2;font-weight:500;font-size:15px;">æ­£å¸¸</span></td>
                <td style="font-weight:600;">490</td>
                <td>æ”¿æ²»ç»æµå­¦...</td>
                <td><a href="#" class="version-link-edit" data-code="490" style="color:#2176c7;text-decoration:none;font-weight:500;">3</a></td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:8px;justify-content:center;">
                    <button style="background:none;border:none;color:#2176c7;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="editDegreeEdit('490')">ç¼–è¾‘</button>
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="deleteDegreeEditRow('490')">åˆ é™¤</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <div style="display:flex;justify-content:flex-end;align-items:center;gap:8px;margin-top:18px;padding: 0 16px 16px;">
            <button class="btn-line">ä¸Šä¸€é¡µ</button>
            <span style="font-size:15px;color:#333;">ç¬¬ <b>1</b> / 3 é¡µ</span>
            <button class="btn-main">ä¸‹ä¸€é¡µ</button>
          </div>
        </div>
      `;
      
      // ç»‘å®šä¿®æ”¹é¡µç­¾çš„å…¨é€‰åŠŸèƒ½
      const selectAllCheckbox = document.getElementById('degreeEditSelectAll');
      if (selectAllCheckbox) {
        selectAllCheckbox.onchange = function() {
          const checkboxes = document.querySelectorAll('input[name="degreeEditSelect"]');
          checkboxes.forEach(cb => cb.checked = this.checked);
        };
      }
    }

    // å†»ç»“é¡µç­¾æ¸²æŸ“å‡½æ•°
    function renderDegreeFreezeTab() {
      const tabContent = document.getElementById('degreeTabContent');
      tabContent.innerHTML = `
        <div class="action-bar">
          <button class="btn-main" id="degreeFreezeQuickSearchBtn" onclick="quickSearchFreeze()"><span class="icon">ğŸ”</span>å¿«é€ŸæŸ¥è¯¢</button>
          <button class="btn-line" id="degreeFreezeAdvancedSearchBtn" onclick="advancedSearchFreeze()"><span class="icon">ğŸ“„</span>é«˜çº§æŸ¥è¯¢</button>
          <button class="btn-main" id="degreeFreezeSelectDataBtn" onclick="selectFreezeData()"><span class="icon">â˜‘ï¸</span>é€‰æ‹©æ•°æ®</button>
          <button class="btn-line" id="degreeFreezeDeleteBtn" onclick="deleteFreezeData()"><span class="icon">ğŸ—‘ï¸</span>åˆ é™¤</button>
          <button class="btn-main" id="degreeFreezeFreezeBtn" onclick="freezeData()"><span class="icon">â„ï¸</span>å†»ç»“</button>
          <div class="export-dropdown">
            <button class="btn-main" id="degreeFreezeExportBtn" style="display:flex;align-items:center;gap:4px;">
              <span class="icon">ğŸ“¤</span>å¯¼å‡º
              <span style="font-size:12px;">â–¼</span>
            </button>
            <div id="degreeFreezeExportMenu" class="export-menu">
              <div class="export-menu-item" data-export-type="selected">
                <span class="icon">â˜‘ï¸</span>å¯¼å‡ºå‹¾é€‰æ•°æ®
              </div>
              <div class="export-menu-item" data-export-type="all">
                <span class="icon">ğŸ“‹</span>å¯¼å‡ºå…¨éƒ¨æ•°æ®
              </div>
            </div>
          </div>
        </div>
        <div class="table-wrap">
          <table class="model-table">
            <thead>
              <tr>
                <th class="checkbox-cell"><input type="checkbox" id="degreeFreezeSelectAll"></th>
                <th>çŠ¶æ€</th>
                <th>ä»£ç </th>
                <th>å­¦ä½æè¿°</th>
                <th>æ•°æ®ç‰ˆæœ¬</th>
                <th>é”™è¯¯æç¤º</th>
                <th>åˆ›å»ºäºº</th>
                <th>åˆ›å»ºäººå•ä½</th>
                <th>åˆ›å»ºæ—¶é—´</th>
                <th>å®¡æ ¸äºº</th>
                <th>å‘å¸ƒäººå•ä½</th>
                <th>å‘å¸ƒæ—¶é—´</th>
                <th style="text-align:center;">æ“ä½œ</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeFreezeSelect" value="444"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#e6fff5;color:#13c2c2;font-weight:500;font-size:15px;">æ­£å¸¸</span></td>
                <td style="font-weight:600;">444</td>
                <td>å»ºç­‘å­¦å­¦å£«</td>
                <td><a href="#" class="version-link-freeze" data-code="444" style="color:#2176c7;text-decoration:none;font-weight:500;">2</a></td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:8px;justify-content:center;">
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="deleteFreezeRow('444')">åˆ é™¤</button>
                    <button style="background:none;border:none;color:#fa8c16;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="freezeRow('444')">å†»ç»“</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeFreezeSelect" value="445"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#e6fff5;color:#13c2c2;font-weight:500;font-size:15px;">æ­£å¸¸</span></td>
                <td style="font-weight:600;">445</td>
                <td>è‰ºæœ¯å­¦å­¦å£«</td>
                <td>1</td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:8px;justify-content:center;">
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="deleteFreezeRow('445')">åˆ é™¤</button>
                    <button style="background:none;border:none;color:#fa8c16;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="freezeRow('445')">å†»ç»“</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeFreezeSelect" value="490"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#e6fff5;color:#13c2c2;font-weight:500;font-size:15px;">æ­£å¸¸</span></td>
                <td style="font-weight:600;">490</td>
                <td>æ”¿æ²»ç»æµå­¦...</td>
                <td><a href="#" class="version-link-freeze" data-code="490" style="color:#2176c7;text-decoration:none;font-weight:500;">3</a></td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:8px;justify-content:center;">
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="deleteFreezeRow('490')">åˆ é™¤</button>
                    <button style="background:none;border:none;color:#fa8c16;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="freezeRow('490')">å†»ç»“</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <div style="display:flex;justify-content:flex-end;align-items:center;gap:8px;margin-top:18px;padding: 0 16px 16px;">
            <button class="btn-line">ä¸Šä¸€é¡µ</button>
            <span style="font-size:15px;color:#333;">ç¬¬ <b>1</b> / 3 é¡µ</span>
            <button class="btn-main">ä¸‹ä¸€é¡µ</button>
          </div>
        </div>
      `;
      
      // ç»‘å®šå†»ç»“é¡µç­¾çš„å…¨é€‰åŠŸèƒ½
      const selectAllCheckbox = document.getElementById('degreeFreezeSelectAll');
      if (selectAllCheckbox) {
        selectAllCheckbox.onchange = function() {
          const checkboxes = document.querySelectorAll('input[name="degreeFreezeSelect"]');
          checkboxes.forEach(cb => cb.checked = this.checked);
        };
      }
    }

    // è§£å†»é¡µç­¾æ¸²æŸ“å‡½æ•°
    function renderDegreeUnfreezeTab() {
      const tabContent = document.getElementById('degreeTabContent');
      tabContent.innerHTML = `
        <div class="action-bar">
          <button class="btn-main" id="degreeUnfreezeQuickSearchBtn" onclick="quickSearchUnfreeze()"><span class="icon">ğŸ”</span>å¿«é€ŸæŸ¥è¯¢</button>
          <button class="btn-line" id="degreeUnfreezeAdvancedSearchBtn" onclick="advancedSearchUnfreeze()"><span class="icon">ğŸ“„</span>é«˜çº§æŸ¥è¯¢</button>
          <button class="btn-main" id="degreeUnfreezeSelectDataBtn" onclick="selectUnfreezeData()"><span class="icon">â˜‘ï¸</span>é€‰æ‹©æ•°æ®</button>
          <button class="btn-line" id="degreeUnfreezeDeleteBtn" onclick="deleteUnfreezeData()"><span class="icon">ğŸ—‘ï¸</span>åˆ é™¤</button>
          <button class="btn-main" id="degreeUnfreezeUnfreezeBtn" onclick="unfreezeData()"><span class="icon">ğŸ”¥</span>è§£å†»</button>
          <div class="export-dropdown">
            <button class="btn-main" id="degreeUnfreezeExportBtn" style="display:flex;align-items:center;gap:4px;">
              <span class="icon">ğŸ“¤</span>å¯¼å‡º
              <span style="font-size:12px;">â–¼</span>
            </button>
            <div id="degreeUnfreezeExportMenu" class="export-menu">
              <div class="export-menu-item" data-export-type="selected">
                <span class="icon">â˜‘ï¸</span>å¯¼å‡ºå‹¾é€‰æ•°æ®
              </div>
              <div class="export-menu-item" data-export-type="all">
                <span class="icon">ğŸ“‹</span>å¯¼å‡ºå…¨éƒ¨æ•°æ®
              </div>
            </div>
          </div>
        </div>
        <div class="table-wrap">
          <table class="model-table">
            <thead>
              <tr>
                <th class="checkbox-cell"><input type="checkbox" id="degreeUnfreezeSelectAll"></th>
                <th>çŠ¶æ€</th>
                <th>ä»£ç </th>
                <th>å­¦ä½æè¿°</th>
                <th>æ•°æ®ç‰ˆæœ¬</th>
                <th>é”™è¯¯æç¤º</th>
                <th>åˆ›å»ºäºº</th>
                <th>åˆ›å»ºäººå•ä½</th>
                <th>åˆ›å»ºæ—¶é—´</th>
                <th>å®¡æ ¸äºº</th>
                <th>å‘å¸ƒäººå•ä½</th>
                <th>å‘å¸ƒæ—¶é—´</th>
                <th style="text-align:center;">æ“ä½œ</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeUnfreezeSelect" value="444"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#fff2e8;color:#fa541c;font-weight:500;font-size:15px;">å·²å†»ç»“</span></td>
                <td style="font-weight:600;">444</td>
                <td>å»ºç­‘å­¦å­¦å£«</td>
                <td><a href="#" class="version-link-unfreeze" data-code="444" style="color:#2176c7;text-decoration:none;font-weight:500;">2</a></td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:8px;justify-content:center;">
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="deleteUnfreezeRow('444')">åˆ é™¤</button>
                    <button style="background:none;border:none;color:#52c41a;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="unfreezeRow('444')">è§£å†»</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeUnfreezeSelect" value="445"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#fff2e8;color:#fa541c;font-weight:500;font-size:15px;">å·²å†»ç»“</span></td>
                <td style="font-weight:600;">445</td>
                <td>è‰ºæœ¯å­¦å­¦å£«</td>
                <td>1</td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:8px;justify-content:center;">
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="deleteUnfreezeRow('445')">åˆ é™¤</button>
                    <button style="background:none;border:none;color:#52c41a;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="unfreezeRow('445')">è§£å†»</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeUnfreezeSelect" value="490"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#fff2e8;color:#fa541c;font-weight:500;font-size:15px;">å·²å†»ç»“</span></td>
                <td style="font-weight:600;">490</td>
                <td>æ”¿æ²»ç»æµå­¦...</td>
                <td><a href="#" class="version-link-unfreeze" data-code="490" style="color:#2176c7;text-decoration:none;font-weight:500;">3</a></td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:8px;justify-content:center;">
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="deleteUnfreezeRow('490')">åˆ é™¤</button>
                    <button style="background:none;border:none;color:#52c41a;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="unfreezeRow('490')">è§£å†»</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <div style="display:flex;justify-content:flex-end;align-items:center;gap:8px;margin-top:18px;padding: 0 16px 16px;">
            <button class="btn-line">ä¸Šä¸€é¡µ</button>
            <span style="font-size:15px;color:#333;">ç¬¬ <b>1</b> / 3 é¡µ</span>
            <button class="btn-main">ä¸‹ä¸€é¡µ</button>
          </div>
        </div>
      `;
      
      // ç»‘å®šè§£å†»é¡µç­¾çš„å…¨é€‰åŠŸèƒ½
      const selectAllCheckbox = document.getElementById('degreeUnfreezeSelectAll');
      if (selectAllCheckbox) {
        selectAllCheckbox.onchange = function() {
          const checkboxes = document.querySelectorAll('input[name="degreeUnfreezeSelect"]');
          checkboxes.forEach(cb => cb.checked = this.checked);
        };
      }
    }

    // å®¡æ ¸é¡µç­¾æ¸²æŸ“å‡½æ•°
    function renderDegreeAuditTab() {
      const tabContent = document.getElementById('degreeTabContent');
      tabContent.innerHTML = `
        <div class="action-bar">
          <button class="btn-main" id="degreeAuditQuickSearchBtn" onclick="quickSearchAudit()"><span class="icon">ğŸ”</span>å¿«é€ŸæŸ¥è¯¢</button>
          <button class="btn-line" id="degreeAuditAdvancedSearchBtn" onclick="advancedSearchAudit()"><span class="icon">ğŸ“„</span>é«˜çº§æŸ¥è¯¢</button>
          <button class="btn-line" id="degreeAuditRejectBtn" onclick="rejectAuditData()"><span class="icon">âŒ</span>é©³å›</button>
          <button class="btn-main" id="degreeAuditApproveBtn" onclick="approveAuditData()"><span class="icon">âœ…</span>é€šè¿‡</button>
          <div class="export-dropdown">
            <button class="btn-main" id="degreeAuditExportBtn" style="display:flex;align-items:center;gap:4px;">
              <span class="icon">ğŸ“¤</span>å¯¼å‡º
              <span style="font-size:12px;">â–¼</span>
            </button>
            <div id="degreeAuditExportMenu" class="export-menu">
              <div class="export-menu-item" data-export-type="selected">
                <span class="icon">â˜‘ï¸</span>å¯¼å‡ºå‹¾é€‰æ•°æ®
              </div>
              <div class="export-menu-item" data-export-type="all">
                <span class="icon">ğŸ“‹</span>å¯¼å‡ºå…¨éƒ¨æ•°æ®
              </div>
            </div>
          </div>
        </div>
        <div class="table-wrap">
          <table class="model-table">
            <thead>
              <tr>
                <th class="checkbox-cell"><input type="checkbox" id="degreeAuditSelectAll"></th>
                <th>çŠ¶æ€</th>
                <th>ä»£ç </th>
                <th>å­¦ä½æè¿°</th>
                <th>æ•°æ®ç‰ˆæœ¬</th>
                <th>é”™è¯¯æç¤º</th>
                <th>åˆ›å»ºäºº</th>
                <th>åˆ›å»ºäººå•ä½</th>
                <th>åˆ›å»ºæ—¶é—´</th>
                <th>å®¡æ ¸äºº</th>
                <th>å‘å¸ƒäººå•ä½</th>
                <th>å‘å¸ƒæ—¶é—´</th>
                <th style="text-align:center;">æ“ä½œ</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeAuditSelect" value="444"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#fff7e6;color:#fa8c16;font-weight:500;font-size:15px;">å¾…å®¡æ ¸</span></td>
                <td style="font-weight:600;">444</td>
                <td>å»ºç­‘å­¦å­¦å£«</td>
                <td><a href="#" class="version-link-audit" data-code="444" style="color:#2176c7;text-decoration:none;font-weight:500;">2</a></td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:6px;justify-content:center;flex-wrap:wrap;">
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="rejectAuditRow('444')">é©³å›</button>
                    <button style="background:none;border:none;color:#52c41a;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="approveAuditRow('444')">é€šè¿‡</button>
                    <button style="background:none;border:none;color:#2176c7;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="showChangeInfo('444')">å˜æ›´ä¿¡æ¯</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeAuditSelect" value="445"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#fff7e6;color:#fa8c16;font-weight:500;font-size:15px;">å¾…å®¡æ ¸</span></td>
                <td style="font-weight:600;">445</td>
                <td>è‰ºæœ¯å­¦å­¦å£«</td>
                <td>1</td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:6px;justify-content:center;flex-wrap:wrap;">
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="rejectAuditRow('445')">é©³å›</button>
                    <button style="background:none;border:none;color:#52c41a;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="approveAuditRow('445')">é€šè¿‡</button>
                    <button style="background:none;border:none;color:#2176c7;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="showChangeInfo('445')">å˜æ›´ä¿¡æ¯</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeAuditSelect" value="490"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#fff7e6;color:#fa8c16;font-weight:500;font-size:15px;">å¾…å®¡æ ¸</span></td>
                <td style="font-weight:600;">490</td>
                <td>æ”¿æ²»ç»æµå­¦...</td>
                <td><a href="#" class="version-link-audit" data-code="490" style="color:#2176c7;text-decoration:none;font-weight:500;">3</a></td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:6px;justify-content:center;flex-wrap:wrap;">
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="rejectAuditRow('490')">é©³å›</button>
                    <button style="background:none;border:none;color:#52c41a;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="approveAuditRow('490')">é€šè¿‡</button>
                    <button style="background:none;border:none;color:#2176c7;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="showChangeInfo('490')">å˜æ›´ä¿¡æ¯</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <div style="display:flex;justify-content:flex-end;align-items:center;gap:8px;margin-top:18px;padding: 0 16px 16px;">
            <button class="btn-line">ä¸Šä¸€é¡µ</button>
            <span style="font-size:15px;color:#333;">ç¬¬ <b>1</b> / 3 é¡µ</span>
            <button class="btn-main">ä¸‹ä¸€é¡µ</button>
          </div>
        </div>
      `;
      
      // ç»‘å®šå®¡æ ¸é¡µç­¾çš„å…¨é€‰åŠŸèƒ½
      const selectAllCheckbox = document.getElementById('degreeAuditSelectAll');
      if (selectAllCheckbox) {
        selectAllCheckbox.onchange = function() {
          const checkboxes = document.querySelectorAll('input[name="degreeAuditSelect"]');
          checkboxes.forEach(cb => cb.checked = this.checked);
        };
      }
    }

    // å½’æ¡£é¡µç­¾æ¸²æŸ“å‡½æ•°
    function renderDegreeArchiveTab() {
      const tabContent = document.getElementById('degreeTabContent');
      tabContent.innerHTML = `
        <div class="action-bar">
          <button class="btn-main" id="degreeArchiveQuickSearchBtn" onclick="quickSearchArchive()"><span class="icon">ğŸ”</span>å¿«é€ŸæŸ¥è¯¢</button>
          <button class="btn-line" id="degreeArchiveAdvancedSearchBtn" onclick="advancedSearchArchive()"><span class="icon">ğŸ“„</span>é«˜çº§æŸ¥è¯¢</button>
          <button class="btn-main" id="degreeArchiveSelectDataBtn" onclick="selectArchiveData()"><span class="icon">â˜‘ï¸</span>é€‰æ‹©æ•°æ®</button>
          <button class="btn-line" id="degreeArchiveDeleteBtn" onclick="deleteArchiveData()"><span class="icon">ğŸ—‘ï¸</span>åˆ é™¤</button>
          <button class="btn-main" id="degreeArchiveArchiveBtn" onclick="archiveData()"><span class="icon">ğŸ“¦</span>å½’æ¡£</button>
          <div class="export-dropdown">
            <button class="btn-main" id="degreeArchiveExportBtn" style="display:flex;align-items:center;gap:4px;">
              <span class="icon">ğŸ“¤</span>å¯¼å‡º
              <span style="font-size:12px;">â–¼</span>
            </button>
            <div id="degreeArchiveExportMenu" class="export-menu">
              <div class="export-menu-item" data-export-type="selected">
                <span class="icon">â˜‘ï¸</span>å¯¼å‡ºå‹¾é€‰æ•°æ®
              </div>
              <div class="export-menu-item" data-export-type="all">
                <span class="icon">ğŸ“‹</span>å¯¼å‡ºå…¨éƒ¨æ•°æ®
              </div>
            </div>
          </div>
        </div>
        <div class="table-wrap">
          <table class="model-table">
            <thead>
              <tr>
                <th class="checkbox-cell"><input type="checkbox" id="degreeArchiveSelectAll"></th>
                <th>çŠ¶æ€</th>
                <th>ä»£ç </th>
                <th>å­¦ä½æè¿°</th>
                <th>æ•°æ®ç‰ˆæœ¬</th>
                <th>é”™è¯¯æç¤º</th>
                <th>åˆ›å»ºäºº</th>
                <th>åˆ›å»ºäººå•ä½</th>
                <th>åˆ›å»ºæ—¶é—´</th>
                <th>å®¡æ ¸äºº</th>
                <th>å‘å¸ƒäººå•ä½</th>
                <th>å‘å¸ƒæ—¶é—´</th>
                <th style="text-align:center;">æ“ä½œ</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeArchiveSelect" value="444"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#f6ffed;color:#52c41a;font-weight:500;font-size:15px;">å·²å½’æ¡£</span></td>
                <td style="font-weight:600;">444</td>
                <td>å»ºç­‘å­¦å­¦å£«</td>
                <td><a href="#" class="version-link-archive" data-code="444" style="color:#2176c7;text-decoration:none;font-weight:500;">2</a></td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:8px;justify-content:center;">
                    <button style="background:none;border:none;color:#52c41a;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="archiveRow('444')">å½’æ¡£</button>
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="deleteArchiveRow('444')">åˆ é™¤</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeArchiveSelect" value="445"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#f6ffed;color:#52c41a;font-weight:500;font-size:15px;">å·²å½’æ¡£</span></td>
                <td style="font-weight:600;">445</td>
                <td>è‰ºæœ¯å­¦å­¦å£«</td>
                <td>1</td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:8px;justify-content:center;">
                    <button style="background:none;border:none;color:#52c41a;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="archiveRow('445')">å½’æ¡£</button>
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="deleteArchiveRow('445')">åˆ é™¤</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeArchiveSelect" value="490"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#f6ffed;color:#52c41a;font-weight:500;font-size:15px;">å·²å½’æ¡£</span></td>
                <td style="font-weight:600;">490</td>
                <td>æ”¿æ²»ç»æµå­¦...</td>
                <td><a href="#" class="version-link-archive" data-code="490" style="color:#2176c7;text-decoration:none;font-weight:500;">3</a></td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <div style="display:flex;gap:8px;justify-content:center;">
                    <button style="background:none;border:none;color:#52c41a;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="archiveRow('490')">å½’æ¡£</button>
                    <button style="background:none;border:none;color:#f5222d;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="deleteArchiveRow('490')">åˆ é™¤</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <div style="display:flex;justify-content:flex-end;align-items:center;gap:8px;margin-top:18px;padding: 0 16px 16px;">
            <button class="btn-line">ä¸Šä¸€é¡µ</button>
            <span style="font-size:15px;color:#333;">ç¬¬ <b>1</b> / 3 é¡µ</span>
            <button class="btn-main">ä¸‹ä¸€é¡µ</button>
          </div>
        </div>
      `;
      
      // ç»‘å®šå½’æ¡£é¡µç­¾çš„å…¨é€‰åŠŸèƒ½
      const selectAllCheckbox = document.getElementById('degreeArchiveSelectAll');
      if (selectAllCheckbox) {
        selectAllCheckbox.onchange = function() {
          const checkboxes = document.querySelectorAll('input[name="degreeArchiveSelect"]');
          checkboxes.forEach(cb => cb.checked = this.checked);
        };
      }
    }

    // æ£€ç´¢é¡µç­¾æ¸²æŸ“å‡½æ•°
    function renderDegreeSearchTab() {
      const tabContent = document.getElementById('degreeTabContent');
      tabContent.innerHTML = `
        <div class="action-bar">
          <button class="btn-main" id="degreeSearchQuickSearchBtn" onclick="quickSearchSearch()"><span class="icon">ğŸ”</span>å¿«é€ŸæŸ¥è¯¢</button>
          <button class="btn-line" id="degreeSearchAdvancedSearchBtn" onclick="advancedSearchSearch()"><span class="icon">ğŸ“„</span>é«˜çº§æŸ¥è¯¢</button>
          <div class="export-dropdown">
            <button class="btn-main" id="degreeSearchExportBtn" style="display:flex;align-items:center;gap:4px;">
              <span class="icon">ğŸ“¤</span>å¯¼å‡º
              <span style="font-size:12px;">â–¼</span>
            </button>
            <div id="degreeSearchExportMenu" class="export-menu">
              <div class="export-menu-item" data-export-type="selected">
                <span class="icon">â˜‘ï¸</span>å¯¼å‡ºå‹¾é€‰æ•°æ®
              </div>
              <div class="export-menu-item" data-export-type="all">
                <span class="icon">ğŸ“‹</span>å¯¼å‡ºå…¨éƒ¨æ•°æ®
              </div>
            </div>
          </div>
        </div>
        <div class="table-wrap">
          <table class="model-table">
            <thead>
              <tr>
                <th class="checkbox-cell"><input type="checkbox" id="degreeSearchSelectAll"></th>
                <th>çŠ¶æ€</th>
                <th>ä»£ç </th>
                <th>å­¦ä½æè¿°</th>
                <th>æ•°æ®ç‰ˆæœ¬</th>
                <th>é”™è¯¯æç¤º</th>
                <th>åˆ›å»ºäºº</th>
                <th>åˆ›å»ºäººå•ä½</th>
                <th>åˆ›å»ºæ—¶é—´</th>
                <th>å®¡æ ¸äºº</th>
                <th>å‘å¸ƒäººå•ä½</th>
                <th>å‘å¸ƒæ—¶é—´</th>
                <th style="text-align:center;">æ“ä½œ</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeSearchSelect" value="444"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#e6fff5;color:#13c2c2;font-weight:500;font-size:15px;">æ­£å¸¸</span></td>
                <td style="font-weight:600;">444</td>
                <td>å»ºç­‘å­¦å­¦å£«</td>
                <td><a href="#" class="version-link-search" data-code="444" style="color:#2176c7;text-decoration:none;font-weight:500;">2</a></td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <button style="background:none;border:none;color:#2176c7;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="showDegreeDetail('444', 'å»ºç­‘å­¦å­¦å£«')">æŸ¥çœ‹è¯¦æƒ…</button>
                </td>
              </tr>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeSearchSelect" value="445"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#e6fff5;color:#13c2c2;font-weight:500;font-size:15px;">æ­£å¸¸</span></td>
                <td style="font-weight:600;">445</td>
                <td>è‰ºæœ¯å­¦å­¦å£«</td>
                <td>1</td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <button style="background:none;border:none;color:#2176c7;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="showDegreeDetail('445', 'è‰ºæœ¯å­¦å­¦å£«')">æŸ¥çœ‹è¯¦æƒ…</button>
                </td>
              </tr>
              <tr>
                <td class="checkbox-cell"><input type="checkbox" name="degreeSearchSelect" value="490"></td>
                <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#e6fff5;color:#13c2c2;font-weight:500;font-size:15px;">æ­£å¸¸</span></td>
                <td style="font-weight:600;">490</td>
                <td>æ”¿æ²»ç»æµå­¦...</td>
                <td><a href="#" class="version-link-search" data-code="490" style="color:#2176c7;text-decoration:none;font-weight:500;">3</a></td>
                <td></td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td>ææ˜¥é˜³</td>
                <td>åŒ—äº¬åŒ–å­¦...</td>
                <td>2025-06-12</td>
                <td style="text-align:center;">
                  <button style="background:none;border:none;color:#2176c7;cursor:pointer;font-size:14px;padding:4px 8px;" onclick="showDegreeDetail('490', 'æ”¿æ²»ç»æµå­¦')">æŸ¥çœ‹è¯¦æƒ…</button>
                </td>
              </tr>
            </tbody>
          </table>
          <div style="display:flex;justify-content:flex-end;align-items:center;gap:8px;margin-top:18px;padding: 0 16px 16px;">
            <button class="btn-line">ä¸Šä¸€é¡µ</button>
            <span style="font-size:15px;color:#333;">ç¬¬ <b>1</b> / 3 é¡µ</span>
            <button class="btn-main">ä¸‹ä¸€é¡µ</button>
          </div>
        </div>
      `;
      
      // ç»‘å®šæ£€ç´¢é¡µç­¾çš„å…¨é€‰åŠŸèƒ½
      const selectAllCheckbox = document.getElementById('degreeSearchSelectAll');
      if (selectAllCheckbox) {
        selectAllCheckbox.onchange = function() {
          const checkboxes = document.querySelectorAll('input[name="degreeSearchSelect"]');
          checkboxes.forEach(cb => cb.checked = this.checked);
        };
      }
    }

    function bindDegreeTabEvents() {
      document.querySelectorAll('.model-tab').forEach(tab => {
        tab.onclick = function() {
          document.querySelectorAll('.model-tab').forEach(t => t.classList.remove('active'));
          this.classList.add('active');
          const tabName = this.getAttribute('data-tab');
          
          // æ ¹æ®é¡µç­¾åç§°æ¸²æŸ“ä¸åŒçš„å†…å®¹
          switch(tabName) {
            case 'query':
              renderDegreeQueryTab();
              bindVersionEvents('query');
              bindExportEvents('query');
              break;
            case 'apply':
              renderDegreeApplyTab();
              bindVersionEvents('apply');
              bindExportEvents('apply');
              break;
            case 'edit':
              renderDegreeEditTab();
              bindVersionEvents('edit');
              bindExportEvents('edit');
              break;
            case 'freeze':
              renderDegreeFreezeTab();
              bindVersionEvents('freeze');
              bindExportEvents('freeze');
              break;
            case 'unfreeze':
              renderDegreeUnfreezeTab();
              bindVersionEvents('unfreeze');
              bindExportEvents('unfreeze');
              break;
            case 'audit':
              renderDegreeAuditTab();
              bindVersionEvents('audit');
              bindExportEvents('audit');
              break;
            case 'archive':
              renderDegreeArchiveTab();
              bindVersionEvents('archive');
              bindExportEvents('archive');
              break;
            case 'search':
              renderDegreeSearchTab();
              bindVersionEvents('search');
              bindExportEvents('search');
              break;
          }
        };
      });
    }

    function bindVersionEvents() {
      // ç»‘å®šç‰ˆæœ¬é“¾æ¥ç‚¹å‡»äº‹ä»¶
      document.querySelectorAll('.version-link').forEach(link => {
        link.onclick = function(e) {
          e.preventDefault();
          const code = this.getAttribute('data-code');
          const version = this.textContent;
          openVersionModal(code, version);
        };
      });
      
      // ç»‘å®šå¿«é€ŸæŸ¥è¯¢
      const quickInput = document.getElementById('versionQuickSearchInput');
      const quickBtn = document.getElementById('versionQuickSearchBtn');
      if (quickInput && quickBtn) {
        quickBtn.onclick = function() {
          const val = quickInput.value.trim();
          filterVersionTable(val);
        };
        quickInput.onkeydown = function(e) {
          if (e.key === 'Enter') quickBtn.click();
        };
      }
    }

    function bindExportEvents() {
      // å¯¼å‡ºæŒ‰é’®ç‚¹å‡»äº‹ä»¶
      const exportBtn = document.getElementById('degreeExportBtn');
      const exportMenu = document.getElementById('degreeExportMenu');
      
      if (exportBtn && exportMenu) {
        exportBtn.onclick = function(e) {
          e.stopPropagation();
          exportMenu.style.display = exportMenu.style.display === 'none' ? 'block' : 'none';
        };

        // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­èœå•
        document.addEventListener('click', function(e) {
          if (!exportBtn.contains(e.target) && !exportMenu.contains(e.target)) {
            exportMenu.style.display = 'none';
          }
        });

        // å¯¼å‡ºèœå•é¡¹ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.export-menu-item').forEach(item => {
          item.onclick = function() {
            const exportType = this.getAttribute('data-export-type');
            handleDegreeExport(exportType);
            exportMenu.style.display = 'none';
          };
        });

        // å…¨é€‰åŠŸèƒ½
        const selectAllCheckbox = document.getElementById('degreeSelectAll');
        if (selectAllCheckbox) {
          selectAllCheckbox.onchange = function() {
            const checkboxes = document.querySelectorAll('input[name="degreeSelect"]');
            checkboxes.forEach(cb => cb.checked = this.checked);
          };
        }
      }
    }

    function handleDegreeExport(exportType) {
      if (exportType === 'selected') {
        // å¯¼å‡ºå‹¾é€‰æ•°æ®
        const selectedRows = document.querySelectorAll('input[name="degreeSelect"]:checked');
        if (selectedRows.length === 0) {
          alert('è¯·å…ˆå‹¾é€‰è¦å¯¼å‡ºçš„æ•°æ®');
          return;
        }
        
        const selectedData = [];
        selectedRows.forEach(checkbox => {
          const row = checkbox.closest('tr');
          const cells = row.querySelectorAll('td');
          selectedData.push({
            status: cells[1].textContent.trim(),
            code: cells[2].textContent.trim(),
            description: cells[3].textContent.trim(),
            version: cells[4].textContent.trim(),
            error: cells[5].textContent.trim(),
            creator: cells[6].textContent.trim(),
            creatorOrg: cells[7].textContent.trim(),
            createTime: cells[8].textContent.trim(),
            reviewer: cells[9].textContent.trim(),
            publishOrg: cells[10].textContent.trim(),
            publishTime: cells[11].textContent.trim()
          });
        });
        
        console.log('å¯¼å‡ºå‹¾é€‰æ•°æ®:', selectedData);
        alert(`å·²å¯¼å‡º ${selectedData.length} æ¡å‹¾é€‰æ•°æ®`);
        
      } else if (exportType === 'all') {
        // å¯¼å‡ºå…¨éƒ¨æ•°æ®
        const allRows = document.querySelectorAll('.model-table tbody tr');
        const allData = [];
        
        allRows.forEach(row => {
          const cells = row.querySelectorAll('td');
          allData.push({
            status: cells[1].textContent.trim(),
            code: cells[2].textContent.trim(),
            description: cells[3].textContent.trim(),
            version: cells[4].textContent.trim(),
            error: cells[5].textContent.trim(),
            creator: cells[6].textContent.trim(),
            creatorOrg: cells[7].textContent.trim(),
            createTime: cells[8].textContent.trim(),
            reviewer: cells[9].textContent.trim(),
            publishOrg: cells[10].textContent.trim(),
            publishTime: cells[11].textContent.trim()
          });
        });
        
        console.log('å¯¼å‡ºå…¨éƒ¨æ•°æ®:', allData);
        alert(`å·²å¯¼å‡ºå…¨éƒ¨ ${allData.length} æ¡æ•°æ®`);
      }
    }

    function openVersionModal(code, version) {
      const modal = document.getElementById('versionModal');
      const title = document.getElementById('versionModalTitle');
      
      // æ ¹æ®ä»£ç è®¾ç½®æ ‡é¢˜
      const codeMap = {
        '444': 'å»ºç­‘å­¦å­¦å£«',
        '490': 'æ”¿æ²»ç»æµå­¦'
      };
      title.textContent = codeMap[code] || `ä»£ç ${code}`;
      
      // æ˜¾ç¤ºå¯¹è¯æ¡†
      modal.style.display = 'flex';
      
      // ç»‘å®šå…³é—­äº‹ä»¶
      document.getElementById('versionModalClose').onclick = closeVersionModal;
      modal.onclick = function(e) {
        if (e.target === modal) closeVersionModal();
      };
      
      // ç»‘å®šç‰ˆæœ¬æ¯”è¾ƒæŒ‰é’®äº‹ä»¶
      document.getElementById('versionCompareBtn').onclick = function() {
        const selectedVersions = Array.from(document.querySelectorAll('input[name="versionSelect"]:checked')).map(cb => cb.value);
        if (selectedVersions.length !== 2) {
          alert('è¯·é€‰æ‹©ä¸¤ä¸ªç‰ˆæœ¬è¿›è¡Œæ¯”è¾ƒ');
          return;
        }
        compareVersions(selectedVersions[0], selectedVersions[1]);
      };
      
      // ç»‘å®šå…¨é€‰äº‹ä»¶
      document.getElementById('versionSelectAll').onchange = function() {
        const checkboxes = document.querySelectorAll('input[name="versionSelect"]');
        checkboxes.forEach(cb => cb.checked = this.checked);
      };
      
      // æ¸²æŸ“ç‰ˆæœ¬æ•°æ®
      renderVersionTable(code);
    }

    function renderVersionTable(code) {
      const tbody = document.getElementById('versionTableBody');
      const versionData = {
        '444': [
          { version: '3', status: 'æ­£å¸¸', code: '444', description: 'å»ºç­‘å­¦å­¦å£«', error: '', creator: 'ææ˜¥é˜³', creatorOrg: 'åŒ—äº¬åŒ–å­¦...', createTime: '2025-01-20', reviewer: 'ææ˜¥é˜³', publishOrg: 'åŒ—äº¬åŒ–å­¦...', publishTime: '2025-01-20 14:30:25' },
          { version: '2', status: 'æ­£å¸¸', code: '444', description: 'å»ºç­‘å­¦å­¦å£«', error: '', creator: 'ç‹äº”', creatorOrg: 'åŒ—äº¬åŒ–å­¦...', createTime: '2025-01-15', reviewer: 'ç‹äº”', publishOrg: 'åŒ—äº¬åŒ–å­¦...', publishTime: '2025-01-15 10:20:15' }
        ],
        '490': [
          { version: '3', status: 'æ­£å¸¸', code: '490', description: 'æ”¿æ²»ç»æµå­¦', error: '', creator: 'ææ˜¥é˜³', creatorOrg: 'åŒ—äº¬åŒ–å­¦...', createTime: '2025-01-20', reviewer: 'ææ˜¥é˜³', publishOrg: 'åŒ—äº¬åŒ–å­¦...', publishTime: '2025-01-20 14:30:25' }
        ]
      };
      
      const data = versionData[code] || [];
      tbody.innerHTML = data.map(item => `
        <tr>
          <td class="checkbox-cell"><input type="checkbox" name="versionSelect" value="${item.version}"></td>
          <td><span style="display:inline-block;padding:2px 14px;border-radius:16px;background:#e6fff5;color:#13c2c2;font-weight:500;font-size:15px;">${item.status}</span></td>
          <td style="font-weight:600;">${item.code}</td>
          <td>${item.description}</td>
          <td>${item.version}</td>
          <td>${item.error}</td>
          <td>${item.creator}</td>
          <td>${item.creatorOrg}</td>
          <td>${item.createTime}</td>
          <td>${item.reviewer}</td>
          <td>${item.publishOrg}</td>
          <td>${item.publishTime}</td>
          <td style="text-align:center;">
            <button style="background:none;border:none;color:#2176c7;cursor:pointer;font-size:14px;padding:4px 8px;">æŸ¥çœ‹</button>
          </td>
        </tr>
      `).join('');
    }

    function closeVersionModal() {
      document.getElementById('versionModal').style.display = 'none';
    }

    function filterVersionTable(keyword) {
      const rows = document.querySelectorAll('#versionTableBody tr');
      rows.forEach(row => {
        const text = row.innerText;
        if (!keyword || text.indexOf(keyword) !== -1) {
          row.style.display = '';
        } else {
          row.style.display = 'none';
        }
      });
    }

    function compareVersions(version1, version2) {
      alert(`æ­£åœ¨æ¯”è¾ƒç‰ˆæœ¬ ${version1} å’Œç‰ˆæœ¬ ${version2}`);
    }

    function showDegreeDetail(code, description) {
      const mask = document.getElementById('degreeDetailDrawerMask');
      const content = document.getElementById('degreeDetailContent');
      
      // å¡«å……è¯¦æƒ…å†…å®¹
      content.innerHTML = `
        <div style="margin-bottom: 20px;">
          <h3 style="color: #2176c7; margin-bottom: 16px;">å­¦ä½åŸºæœ¬ä¿¡æ¯</h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
            <div>
              <label style="font-weight: 500; color: #666;">å­¦ä½ä»£ç ï¼š</label>
              <span style="margin-left: 8px;">${code}</span>
            </div>
            <div>
              <label style="font-weight: 500; color: #666;">å­¦ä½æè¿°ï¼š</label>
              <span style="margin-left: 8px;">${description}</span>
            </div>
            <div>
              <label style="font-weight: 500; color: #666;">çŠ¶æ€ï¼š</label>
              <span style="margin-left: 8px; color: #13c2c2;">æ­£å¸¸</span>
            </div>
            <div>
              <label style="font-weight: 500; color: #666;">æ•°æ®ç‰ˆæœ¬ï¼š</label>
              <span style="margin-left: 8px;">2</span>
            </div>
          </div>
        </div>
        
        <div style="margin-bottom: 20px;">
          <h3 style="color: #2176c7; margin-bottom: 16px;">åˆ›å»ºä¿¡æ¯</h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
            <div>
              <label style="font-weight: 500; color: #666;">åˆ›å»ºäººï¼š</label>
              <span style="margin-left: 8px;">ææ˜¥é˜³</span>
            </div>
            <div>
              <label style="font-weight: 500; color: #666;">åˆ›å»ºäººå•ä½ï¼š</label>
              <span style="margin-left: 8px;">åŒ—äº¬åŒ–å­¦...</span>
            </div>
            <div>
              <label style="font-weight: 500; color: #666;">åˆ›å»ºæ—¶é—´ï¼š</label>
              <span style="margin-left: 8px;">2025-06-12</span>
            </div>
          </div>
        </div>
        
        <div>
          <h3 style="color: #2176c7; margin-bottom: 16px;">å‘å¸ƒä¿¡æ¯</h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
            <div>
              <label style="font-weight: 500; color: #666;">å®¡æ ¸äººï¼š</label>
              <span style="margin-left: 8px;">ææ˜¥é˜³</span>
            </div>
            <div>
              <label style="font-weight: 500; color: #666;">å‘å¸ƒäººå•ä½ï¼š</label>
              <span style="margin-left: 8px;">åŒ—äº¬åŒ–å­¦...</span>
            </div>
            <div>
              <label style="font-weight: 500; color: #666;">å‘å¸ƒæ—¶é—´ï¼š</label>
              <span style="margin-left: 8px;">2025-06-12</span>
            </div>
          </div>
        </div>
      `;
      
      // æ˜¾ç¤ºæŠ½å±‰
      mask.style.display = 'block';
      
      // ç»‘å®šå…³é—­äº‹ä»¶
      document.getElementById('degreeDetailDrawerClose').onclick = function() {
        mask.style.display = 'none';
      };
      
      mask.onclick = function(e) {
        if (e.target === mask) {
          mask.style.display = 'none';
        }
      };
    }

    // ç”³è¯·é¡µç­¾ç›¸å…³å‡½æ•°
    function addDegreeApply() {
      // è®¾ç½®æŠ½å±‰æ ‡é¢˜
      document.getElementById('degreeApplyDrawerTitle').textContent = 'æ–°å¢å­¦ä½ç”³è¯·';
      
      // æ¸…ç©ºè¡¨å•
      document.getElementById('degreeApplyForm').reset();
      
      // æ˜¾ç¤ºæŠ½å±‰
      document.getElementById('degreeApplyDrawerMask').style.display = 'block';
      
      // ç»‘å®šäº‹ä»¶
      bindDegreeApplyDrawerEvents();
    }

    function deleteDegreeApply() {
      const selectedRows = document.querySelectorAll('input[name="degreeApplySelect"]:checked');
      if (selectedRows.length === 0) {
        alert('è¯·å…ˆå‹¾é€‰è¦åˆ é™¤çš„æ•°æ®');
        return;
      }
      if (confirm(`ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${selectedRows.length} æ¡æ•°æ®å—ï¼Ÿ`)) {
        alert('åˆ é™¤æˆåŠŸ');
      }
    }

    function exportApplyTemplate() {
      alert('ç”³è¯·æ¨¡ç‰ˆå¯¼å‡ºæˆåŠŸ');
    }

    function importApplyData() {
      alert('æ‰¹é‡ç”³è¯·å¯¼å…¥åŠŸèƒ½');
    }

    function exportApplyData() {
      const selectedRows = document.querySelectorAll('input[name="degreeApplySelect"]:checked');
      if (selectedRows.length === 0) {
        alert('è¯·å…ˆå‹¾é€‰è¦å¯¼å‡ºçš„æ•°æ®');
        return;
      }
      alert(`å¯¼å‡º ${selectedRows.length} æ¡ç”³è¯·æ•°æ®æˆåŠŸ`);
    }

    function submitDegreeApply() {
      const selectedRows = document.querySelectorAll('input[name="degreeApplySelect"]:checked');
      if (selectedRows.length === 0) {
        alert('è¯·å…ˆå‹¾é€‰è¦æäº¤çš„æ•°æ®');
        return;
      }
      if (confirm(`ç¡®å®šè¦æäº¤é€‰ä¸­çš„ ${selectedRows.length} æ¡ç”³è¯·æ•°æ®å—ï¼Ÿ`)) {
        alert('æäº¤æˆåŠŸ');
      }
    }

    function copyDegreeApply() {
      const selectedRows = document.querySelectorAll('input[name="degreeApplySelect"]:checked');
      if (selectedRows.length === 0) {
        alert('è¯·å…ˆå‹¾é€‰è¦å¤åˆ¶çš„æ•°æ®');
        return;
      }
      alert(`å¤åˆ¶ ${selectedRows.length} æ¡ç”³è¯·æ•°æ®æˆåŠŸ`);
    }

    function editDegreeApply(code) {
      // è®¾ç½®æŠ½å±‰æ ‡é¢˜
      document.getElementById('degreeApplyDrawerTitle').textContent = 'ç¼–è¾‘å­¦ä½ç”³è¯·';
      
      // å¡«å……è¡¨å•æ•°æ®ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
      const mockData = {
        '444': { code: '444', description: 'å»ºç­‘å­¦å­¦å£«', englishName: 'Bachelor of Architecture', type: 'å­¦å£«', category: 'å·¥å­¦', subject: 'å»ºç­‘å­¦', isValid: '1', sortOrder: '1', remarks: 'å»ºç­‘å­¦ä¸“ä¸šå­¦å£«å­¦ä½' },
        '445': { code: '445', description: 'è‰ºæœ¯å­¦å­¦å£«', englishName: 'Bachelor of Arts', type: 'å­¦å£«', category: 'è‰ºæœ¯å­¦', subject: 'è‰ºæœ¯å­¦', isValid: '1', sortOrder: '2', remarks: 'è‰ºæœ¯å­¦ä¸“ä¸šå­¦å£«å­¦ä½' },
        '490': { code: '490', description: 'æ”¿æ²»ç»æµå­¦', englishName: 'Political Economy', type: 'ç¡•å£«', category: 'ç»æµå­¦', subject: 'ç†è®ºç»æµå­¦', isValid: '1', sortOrder: '3', remarks: 'æ”¿æ²»ç»æµå­¦ä¸“ä¸šç¡•å£«å­¦ä½' }
      };
      
      const data = mockData[code] || {};
      
      // å¡«å……è¡¨å•
      document.getElementById('degreeCode').value = data.code || '';
      document.getElementById('degreeDescription').value = data.description || '';
      document.getElementById('degreeEnglishName').value = data.englishName || '';
      document.getElementById('degreeType').value = data.type || '';
      document.getElementById('subjectCategory').value = data.category || '';
      document.getElementById('firstLevelSubject').value = data.subject || '';
      document.getElementById('isValid').value = data.isValid || '1';
      document.getElementById('sortOrder').value = data.sortOrder || '';
      document.getElementById('remarks').value = data.remarks || '';
      
      // æ˜¾ç¤ºæŠ½å±‰
      document.getElementById('degreeApplyDrawerMask').style.display = 'block';
      
      // ç»‘å®šäº‹ä»¶
      bindDegreeApplyDrawerEvents();
    }

    function deleteDegreeApplyRow(code) {
      if (confirm(`ç¡®å®šè¦åˆ é™¤ä»£ç ä¸º ${code} çš„ç”³è¯·æ•°æ®å—ï¼Ÿ`)) {
        alert('åˆ é™¤æˆåŠŸ');
      }
    }

    // ç»‘å®šç”³è¯·æŠ½å±‰äº‹ä»¶
    function bindDegreeApplyDrawerEvents() {
      const mask = document.getElementById('degreeApplyDrawerMask');
      const closeBtn = document.getElementById('degreeApplyDrawerClose');
      const cancelBtn = document.getElementById('degreeApplyCancelBtn');
      const form = document.getElementById('degreeApplyForm');
      
      // å…³é—­æŒ‰é’®äº‹ä»¶
      closeBtn.onclick = closeDegreeApplyDrawer;
      
      // å–æ¶ˆæŒ‰é’®äº‹ä»¶
      cancelBtn.onclick = closeDegreeApplyDrawer;
      
      // ç‚¹å‡»é®ç½©å…³é—­
      mask.onclick = function(e) {
        if (e.target === mask) {
          closeDegreeApplyDrawer();
        }
      };
      
      // è¡¨å•æäº¤äº‹ä»¶
      form.onsubmit = function(e) {
        e.preventDefault();
        saveDegreeApply();
      };
      
      // å­¦ç§‘é—¨ç±»å˜åŒ–æ—¶æ›´æ–°ä¸€çº§å­¦ç§‘é€‰é¡¹
      document.getElementById('subjectCategory').onchange = function() {
        updateFirstLevelSubjects(this.value);
      };
    }

    // å…³é—­ç”³è¯·æŠ½å±‰
    function closeDegreeApplyDrawer() {
      document.getElementById('degreeApplyDrawerMask').style.display = 'none';
    }

    // ä¿å­˜ç”³è¯·æ•°æ®
    function saveDegreeApply() {
      const formData = new FormData(document.getElementById('degreeApplyForm'));
      const data = Object.fromEntries(formData.entries());
      
      // éªŒè¯å¿…å¡«å­—æ®µ
      if (!data.degreeCode || !data.degreeDescription) {
        alert('è¯·å¡«å†™å¿…å¡«å­—æ®µ');
        return;
      }
      
      // æ¨¡æ‹Ÿä¿å­˜
      console.log('ä¿å­˜æ•°æ®:', data);
      alert('ä¿å­˜æˆåŠŸ');
      closeDegreeApplyDrawer();
    }

    // æ›´æ–°ä¸€çº§å­¦ç§‘é€‰é¡¹
    function updateFirstLevelSubjects(category) {
      const subjectSelect = document.getElementById('firstLevelSubject');
      const subjects = {
        'å“²å­¦': ['å“²å­¦'],
        'ç»æµå­¦': ['ç†è®ºç»æµå­¦', 'åº”ç”¨ç»æµå­¦'],
        'æ³•å­¦': ['æ³•å­¦', 'æ”¿æ²»å­¦', 'ç¤¾ä¼šå­¦', 'æ°‘æ—å­¦', 'é©¬å…‹æ€ä¸»ä¹‰ç†è®º'],
        'æ•™è‚²å­¦': ['æ•™è‚²å­¦', 'å¿ƒç†å­¦', 'ä½“è‚²å­¦'],
        'æ–‡å­¦': ['ä¸­å›½è¯­è¨€æ–‡å­¦', 'å¤–å›½è¯­è¨€æ–‡å­¦', 'æ–°é—»ä¼ æ’­å­¦'],
        'å†å²å­¦': ['è€ƒå¤å­¦', 'ä¸­å›½å²', 'ä¸–ç•Œå²'],
        'ç†å­¦': ['æ•°å­¦', 'ç‰©ç†å­¦', 'åŒ–å­¦', 'å¤©æ–‡å­¦', 'åœ°ç†å­¦', 'å¤§æ°”ç§‘å­¦', 'æµ·æ´‹ç§‘å­¦', 'åœ°çƒç‰©ç†å­¦', 'ç”Ÿç‰©ç§‘å­¦', 'ç³»ç»Ÿç§‘å­¦', 'ç§‘å­¦æŠ€æœ¯å²', 'ç”Ÿæ€å­¦', 'ç»Ÿè®¡å­¦'],
        'å·¥å­¦': ['åŠ›å­¦', 'æœºæ¢°å·¥ç¨‹', 'å…‰å­¦å·¥ç¨‹', 'ä»ªå™¨ç§‘å­¦ä¸æŠ€æœ¯', 'ææ–™ç§‘å­¦ä¸å·¥ç¨‹', 'å†¶é‡‘å·¥ç¨‹', 'åŠ¨åŠ›å·¥ç¨‹åŠå·¥ç¨‹çƒ­ç‰©ç†', 'ç”µæ°”å·¥ç¨‹', 'ç”µå­ç§‘å­¦ä¸æŠ€æœ¯', 'ä¿¡æ¯ä¸é€šä¿¡å·¥ç¨‹', 'æ§åˆ¶ç§‘å­¦ä¸å·¥ç¨‹', 'è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯', 'å»ºç­‘å­¦', 'åœŸæœ¨å·¥ç¨‹', 'æ°´åˆ©å·¥ç¨‹', 'æµ‹ç»˜ç§‘å­¦ä¸æŠ€æœ¯', 'åŒ–å­¦å·¥ç¨‹ä¸æŠ€æœ¯', 'åœ°è´¨èµ„æºä¸åœ°è´¨å·¥ç¨‹', 'çŸ¿ä¸šå·¥ç¨‹', 'çŸ³æ²¹ä¸å¤©ç„¶æ°”å·¥ç¨‹', 'çººç»‡ç§‘å­¦ä¸å·¥ç¨‹', 'è½»å·¥æŠ€æœ¯ä¸å·¥ç¨‹', 'äº¤é€šè¿è¾“å·¥ç¨‹', 'èˆ¹èˆ¶ä¸æµ·æ´‹å·¥ç¨‹', 'èˆªç©ºå®‡èˆªç§‘å­¦ä¸æŠ€æœ¯', 'å…µå™¨ç§‘å­¦ä¸æŠ€æœ¯', 'æ ¸ç§‘å­¦ä¸æŠ€æœ¯', 'å†œä¸šå·¥ç¨‹', 'æ—ä¸šå·¥ç¨‹', 'ç¯å¢ƒç§‘å­¦ä¸å·¥ç¨‹', 'ç”Ÿç‰©åŒ»å­¦å·¥ç¨‹', 'é£Ÿå“ç§‘å­¦ä¸å·¥ç¨‹', 'åŸä¹¡è§„åˆ’å­¦', 'é£æ™¯å›­æ—å­¦', 'è½¯ä»¶å·¥ç¨‹', 'ç”Ÿç‰©å·¥ç¨‹', 'å®‰å…¨ç§‘å­¦ä¸å·¥ç¨‹', 'å…¬å®‰æŠ€æœ¯'],
        'å†œå­¦': ['ä½œç‰©å­¦', 'å›­è‰ºå­¦', 'å†œä¸šèµ„æºä¸ç¯å¢ƒ', 'æ¤ç‰©ä¿æŠ¤', 'ç•œç‰§å­¦', 'å…½åŒ»å­¦', 'æ—å­¦', 'æ°´äº§', 'è‰å­¦'],
        'åŒ»å­¦': ['åŸºç¡€åŒ»å­¦', 'ä¸´åºŠåŒ»å­¦', 'å£è…”åŒ»å­¦', 'å…¬å…±å«ç”Ÿä¸é¢„é˜²åŒ»å­¦', 'ä¸­åŒ»å­¦', 'ä¸­è¥¿åŒ»ç»“åˆ', 'è¯å­¦', 'ä¸­è¯å­¦', 'ç‰¹ç§åŒ»å­¦', 'åŒ»å­¦æŠ€æœ¯', 'æŠ¤ç†å­¦'],
        'ç®¡ç†å­¦': ['ç®¡ç†ç§‘å­¦ä¸å·¥ç¨‹', 'å·¥å•†ç®¡ç†', 'å†œæ—ç»æµç®¡ç†', 'å…¬å…±ç®¡ç†', 'å›¾ä¹¦æƒ…æŠ¥ä¸æ¡£æ¡ˆç®¡ç†'],
        'è‰ºæœ¯å­¦': ['è‰ºæœ¯å­¦ç†è®º', 'éŸ³ä¹ä¸èˆè¹ˆå­¦', 'æˆå‰§ä¸å½±è§†å­¦', 'ç¾æœ¯å­¦', 'è®¾è®¡å­¦']
      };
      
      // æ¸…ç©ºç°æœ‰é€‰é¡¹
      subjectSelect.innerHTML = '<option value="">è¯·é€‰æ‹©ä¸€çº§å­¦ç§‘</option>';
      
      // æ·»åŠ æ–°é€‰é¡¹
      if (category && subjects[category]) {
        subjects[category].forEach(subject => {
          const option = document.createElement('option');
          option.value = subject;
          option.textContent = subject;
          subjectSelect.appendChild(option);
        });
      }
    }

    // ä¿®æ”¹é¡µç­¾ç›¸å…³å‡½æ•°
    function selectEditData() {
      alert('é€‰æ‹©ä¿®æ”¹æ•°æ®');
    }

    function deleteEditData() {
      const selectedRows = document.querySelectorAll('input[name="degreeEditSelect"]:checked');
      if (selectedRows.length === 0) {
        alert('è¯·å…ˆå‹¾é€‰è¦åˆ é™¤çš„æ•°æ®');
        return;
      }
      if (confirm(`ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${selectedRows.length} æ¡æ•°æ®å—ï¼Ÿ`)) {
        alert('åˆ é™¤æˆåŠŸ');
      }
    }

    function exportEditTemplate() {
      alert('æ‰¹é‡ä¿®æ”¹æ¨¡ç‰ˆå¯¼å‡ºæˆåŠŸ');
    }

    function importEditData() {
      alert('æ‰¹é‡ä¿®æ”¹å¯¼å…¥åŠŸèƒ½');
    }

    function exportEditData() {
      const selectedRows = document.querySelectorAll('input[name="degreeEditSelect"]:checked');
      if (selectedRows.length === 0) {
        alert('è¯·å…ˆå‹¾é€‰è¦å¯¼å‡ºçš„æ•°æ®');
        return;
      }
      alert(`å¯¼å‡º ${selectedRows.length} æ¡ä¿®æ”¹æ•°æ®æˆåŠŸ`);
    }

    function submitEditData() {
      const selectedRows = document.querySelectorAll('input[name="degreeEditSelect"]:checked');
      if (selectedRows.length === 0) {
        alert('è¯·å…ˆå‹¾é€‰è¦æäº¤çš„æ•°æ®');
        return;
      }
      if (confirm(`ç¡®å®šè¦æäº¤é€‰ä¸­çš„ ${selectedRows.length} æ¡ä¿®æ”¹æ•°æ®å—ï¼Ÿ`)) {
        alert('æäº¤æˆåŠŸ');
      }
    }

    function editDegreeEdit(code) {
      // è®¾ç½®æŠ½å±‰æ ‡é¢˜
      document.getElementById('degreeApplyDrawerTitle').textContent = 'ç¼–è¾‘å­¦ä½ä¿®æ”¹';
      
      // å¡«å……è¡¨å•æ•°æ®ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
      const mockData = {
        '444': { code: '444', description: 'å»ºç­‘å­¦å­¦å£«', englishName: 'Bachelor of Architecture', type: 'å­¦å£«', category: 'å·¥å­¦', subject: 'å»ºç­‘å­¦', isValid: '1', sortOrder: '1', remarks: 'å»ºç­‘å­¦ä¸“ä¸šå­¦å£«å­¦ä½' },
        '445': { code: '445', description: 'è‰ºæœ¯å­¦å­¦å£«', englishName: 'Bachelor of Arts', type: 'å­¦å£«', category: 'è‰ºæœ¯å­¦', subject: 'è‰ºæœ¯å­¦', isValid: '1', sortOrder: '2', remarks: 'è‰ºæœ¯å­¦ä¸“ä¸šå­¦å£«å­¦ä½' },
        '490': { code: '490', description: 'æ”¿æ²»ç»æµå­¦', englishName: 'Political Economy', type: 'ç¡•å£«', category: 'ç»æµå­¦', subject: 'ç†è®ºç»æµå­¦', isValid: '1', sortOrder: '3', remarks: 'æ”¿æ²»ç»æµå­¦ä¸“ä¸šç¡•å£«å­¦ä½' }
      };
      
      const data = mockData[code] || {};
      
      // å¡«å……è¡¨å•
      document.getElementById('degreeCode').value = data.code || '';
      document.getElementById('degreeDescription').value = data.description || '';
      document.getElementById('degreeEnglishName').value = data.englishName || '';
      document.getElementById('degreeType').value = data.type || '';
      document.getElementById('subjectCategory').value = data.category || '';
      document.getElementById('firstLevelSubject').value = data.subject || '';
      document.getElementById('isValid').value = data.isValid || '1';
      document.getElementById('sortOrder').value = data.sortOrder || '';
      document.getElementById('remarks').value = data.remarks || '';
      
      // æ˜¾ç¤ºæŠ½å±‰
      document.getElementById('degreeApplyDrawerMask').style.display = 'block';
      
      // ç»‘å®šäº‹ä»¶
      bindDegreeApplyDrawerEvents();
    }

    function deleteDegreeEditRow(code) {
      if (confirm(`ç¡®å®šè¦åˆ é™¤ä»£ç ä¸º ${code} çš„ä¿®æ”¹æ•°æ®å—ï¼Ÿ`)) {
        alert('åˆ é™¤æˆåŠŸ');
      }
    }

    function quickSearchEdit() {
      alert('å¿«é€ŸæŸ¥è¯¢ä¿®æ”¹æ•°æ®');
    }

    function advancedSearchEdit() {
      alert('é«˜çº§æŸ¥è¯¢ä¿®æ”¹æ•°æ®');
    }

    // æŸ¥è¯¢é¡µç­¾ç›¸å…³å‡½æ•°
    function quickSearchQuery() {
      alert('å¿«é€ŸæŸ¥è¯¢æŸ¥è¯¢æ•°æ®');
    }

    function advancedSearchQuery() {
      alert('é«˜çº§æŸ¥è¯¢æŸ¥è¯¢æ•°æ®');
    }

    // ç”³è¯·é¡µç­¾ç›¸å…³å‡½æ•°
    function quickSearchApply() {
      alert('å¿«é€ŸæŸ¥è¯¢ç”³è¯·æ•°æ®');
    }

    function advancedSearchApply() {
      alert('é«˜çº§æŸ¥è¯¢ç”³è¯·æ•°æ®');
    }

    // å†»ç»“é¡µç­¾ç›¸å…³å‡½æ•°
    function quickSearchFreeze() {
      alert('å¿«é€ŸæŸ¥è¯¢å†»ç»“æ•°æ®');
    }

    function advancedSearchFreeze() {
      alert('é«˜çº§æŸ¥è¯¢å†»ç»“æ•°æ®');
    }

    function selectFreezeData() {
      alert('é€‰æ‹©å†»ç»“æ•°æ®');
    }

    function deleteFreezeData() {
      const selectedRows = document.querySelectorAll('input[name="degreeFreezeSelect"]:checked');
      if (selectedRows.length === 0) {
        alert('è¯·å…ˆå‹¾é€‰è¦åˆ é™¤çš„æ•°æ®');
        return;
      }
      if (confirm(`ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${selectedRows.length} æ¡æ•°æ®å—ï¼Ÿ`)) {
        alert('åˆ é™¤æˆåŠŸ');
      }
    }

    function freezeData() {
      const selectedRows = document.querySelectorAll('input[name="degreeFreezeSelect"]:checked');
      if (selectedRows.length === 0) {
        alert('è¯·å…ˆå‹¾é€‰è¦å†»ç»“çš„æ•°æ®');
        return;
      }
      if (confirm(`ç¡®å®šè¦å†»ç»“é€‰ä¸­çš„ ${selectedRows.length} æ¡æ•°æ®å—ï¼Ÿ`)) {
        alert('å†»ç»“æˆåŠŸ');
      }
    }

    function deleteFreezeRow(code) {
      if (confirm(`ç¡®å®šè¦åˆ é™¤ä»£ç ä¸º ${code} çš„å†»ç»“æ•°æ®å—ï¼Ÿ`)) {
        alert('åˆ é™¤æˆåŠŸ');
      }
    }

    function freezeRow(code) {
      if (confirm(`ç¡®å®šè¦å†»ç»“ä»£ç ä¸º ${code} çš„æ•°æ®å—ï¼Ÿ`)) {
        alert('å†»ç»“æˆåŠŸ');
      }
    }

    // è§£å†»é¡µç­¾ç›¸å…³å‡½æ•°
    function quickSearchUnfreeze() {
      alert('å¿«é€ŸæŸ¥è¯¢è§£å†»æ•°æ®');
    }

    function advancedSearchUnfreeze() {
      alert('é«˜çº§æŸ¥è¯¢è§£å†»æ•°æ®');
    }

    function selectUnfreezeData() {
      alert('é€‰æ‹©è§£å†»æ•°æ®');
    }

    function deleteUnfreezeData() {
      const selectedRows = document.querySelectorAll('input[name="degreeUnfreezeSelect"]:checked');
      if (selectedRows.length === 0) {
        alert('è¯·å…ˆå‹¾é€‰è¦åˆ é™¤çš„æ•°æ®');
        return;
      }
      if (confirm(`ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${selectedRows.length} æ¡æ•°æ®å—ï¼Ÿ`)) {
        alert('åˆ é™¤æˆåŠŸ');
      }
    }

    function unfreezeData() {
      const selectedRows = document.querySelectorAll('input[name="degreeUnfreezeSelect"]:checked');
      if (selectedRows.length === 0) {
        alert('è¯·å…ˆå‹¾é€‰è¦è§£å†»çš„æ•°æ®');
        return;
      }
      if (confirm(`ç¡®å®šè¦è§£å†»é€‰ä¸­çš„ ${selectedRows.length} æ¡æ•°æ®å—ï¼Ÿ`)) {
        alert('è§£å†»æˆåŠŸ');
      }
    }

    function deleteUnfreezeRow(code) {
      if (confirm(`ç¡®å®šè¦åˆ é™¤ä»£ç ä¸º ${code} çš„è§£å†»æ•°æ®å—ï¼Ÿ`)) {
        alert('åˆ é™¤æˆåŠŸ');
      }
    }

    function unfreezeRow(code) {
      if (confirm(`ç¡®å®šè¦è§£å†»ä»£ç ä¸º ${code} çš„æ•°æ®å—ï¼Ÿ`)) {
        alert('è§£å†»æˆåŠŸ');
      }
    }

    // å®¡æ ¸é¡µç­¾ç›¸å…³å‡½æ•°
    function quickSearchAudit() {
      alert('å¿«é€ŸæŸ¥è¯¢å®¡æ ¸æ•°æ®');
    }

    function advancedSearchAudit() {
      alert('é«˜çº§æŸ¥è¯¢å®¡æ ¸æ•°æ®');
    }

    function rejectAuditData() {
      const selectedRows = document.querySelectorAll('input[name="degreeAuditSelect"]:checked');
      if (selectedRows.length === 0) {
        alert('è¯·å…ˆå‹¾é€‰è¦é©³å›çš„æ•°æ®');
        return;
      }
      if (confirm(`ç¡®å®šè¦é©³å›é€‰ä¸­çš„ ${selectedRows.length} æ¡æ•°æ®å—ï¼Ÿ`)) {
        alert('é©³å›æˆåŠŸ');
      }
    }

    function approveAuditData() {
      const selectedRows = document.querySelectorAll('input[name="degreeAuditSelect"]:checked');
      if (selectedRows.length === 0) {
        alert('è¯·å…ˆå‹¾é€‰è¦é€šè¿‡çš„æ•°æ®');
        return;
      }
      if (confirm(`ç¡®å®šè¦é€šè¿‡é€‰ä¸­çš„ ${selectedRows.length} æ¡æ•°æ®å—ï¼Ÿ`)) {
        alert('å®¡æ ¸é€šè¿‡æˆåŠŸ');
      }
    }

    function rejectAuditRow(code) {
      if (confirm(`ç¡®å®šè¦é©³å›ä»£ç ä¸º ${code} çš„å®¡æ ¸æ•°æ®å—ï¼Ÿ`)) {
        alert('é©³å›æˆåŠŸ');
      }
    }

    function approveAuditRow(code) {
      if (confirm(`ç¡®å®šè¦é€šè¿‡ä»£ç ä¸º ${code} çš„å®¡æ ¸æ•°æ®å—ï¼Ÿ`)) {
        alert('å®¡æ ¸é€šè¿‡æˆåŠŸ');
      }
    }

    function showChangeInfo(code) {
      alert(`æ˜¾ç¤ºä»£ç ä¸º ${code} çš„å˜æ›´ä¿¡æ¯`);
    }

    // å½’æ¡£é¡µç­¾ç›¸å…³å‡½æ•°
    function quickSearchArchive() {
      alert('å¿«é€ŸæŸ¥è¯¢å½’æ¡£æ•°æ®');
    }

    function advancedSearchArchive() {
      alert('é«˜çº§æŸ¥è¯¢å½’æ¡£æ•°æ®');
    }

    function selectArchiveData() {
      alert('é€‰æ‹©å½’æ¡£æ•°æ®');
    }

    function deleteArchiveData() {
      const selectedRows = document.querySelectorAll('input[name="degreeArchiveSelect"]:checked');
      if (selectedRows.length === 0) {
        alert('è¯·å…ˆå‹¾é€‰è¦åˆ é™¤çš„æ•°æ®');
        return;
      }
      if (confirm(`ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${selectedRows.length} æ¡æ•°æ®å—ï¼Ÿ`)) {
        alert('åˆ é™¤æˆåŠŸ');
      }
    }

    function archiveData() {
      const selectedRows = document.querySelectorAll('input[name="degreeArchiveSelect"]:checked');
      if (selectedRows.length === 0) {
        alert('è¯·å…ˆå‹¾é€‰è¦å½’æ¡£çš„æ•°æ®');
        return;
      }
      if (confirm(`ç¡®å®šè¦å½’æ¡£é€‰ä¸­çš„ ${selectedRows.length} æ¡æ•°æ®å—ï¼Ÿ`)) {
        alert('å½’æ¡£æˆåŠŸ');
      }
    }

    function archiveRow(code) {
      if (confirm(`ç¡®å®šè¦å½’æ¡£ä»£ç ä¸º ${code} çš„æ•°æ®å—ï¼Ÿ`)) {
        alert('å½’æ¡£æˆåŠŸ');
      }
    }

    function deleteArchiveRow(code) {
      if (confirm(`ç¡®å®šè¦åˆ é™¤ä»£ç ä¸º ${code} çš„å½’æ¡£æ•°æ®å—ï¼Ÿ`)) {
        alert('åˆ é™¤æˆåŠŸ');
      }
    }

    // æ£€ç´¢é¡µç­¾ç›¸å…³å‡½æ•°
    function quickSearchSearch() {
      alert('å¿«é€ŸæŸ¥è¯¢æ£€ç´¢æ•°æ®');
    }

    function advancedSearchSearch() {
      alert('é«˜çº§æŸ¥è¯¢æ£€ç´¢æ•°æ®');
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://npmcdn.com/flatpickr/dist/l10n/zh.js"></script>
</body>
</html> 