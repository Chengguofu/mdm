<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>索引管理</title>
    <!-- 引入 Bootstrap -->
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .toolbar {
            margin-bottom: 15px;
        }
        .modal-content {
            margin-top: 20%;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <!-- 新增标题栏 -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="mb-0">索引管理列表</h2>
            <div>
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addModal">新增</button>
                <button class="btn btn-danger ms-2" onclick="deleteSelected()">删除</button>
            </div>
        </div>

        <!-- 数据表格 -->
        <table class="table table-hover table-bordered">
            <thead class="table-light">
                <tr>
                    <th><input type="checkbox" onclick="toggleSelectAll(this)"></th>
                    <th>索引名称</th>
                    <th>字段</th>
                    <th>字段名称</th>
                </tr>
            </thead>
            <tbody id="dataBody">
                <!-- 示例数据 -->
                <tr>
                    <td><input type="checkbox"></td>
                    <td>用户信息索引</td>
                    <td>user_id</td>
                    <td>用户编号</td>
                </tr>
                <tr>
                    <td><input type="checkbox"></td>
                    <td>订单主索引</td>
                    <td>order_no</td>
                    <td>订单号码</td>
                </tr>
                <tr>
                    <td><input type="checkbox"></td>
                    <td>产品分类索引</td>
                    <td>category_id</td>
                    <td>分类编码</td>
                </tr>
            </tbody>
        </table>

        <!-- 优化后的弹窗 -->
        <div class="modal fade" id="addModal" data-bs-backdrop="static">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content shadow">
                    <div class="modal-header bg-primary text-white">
                        <h4 class="modal-title">新建索引</h4>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="关闭"></button>
                    </div>
                    <div class="modal-body p-4">
                        <form id="addForm" class="needs-validation" novalidate>
                            <!-- 表单项保持不变 -->
                        </form>
                    </div>
                    <div class="modal-footer bg-light">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            <i class="bi bi-x-lg me-2"></i>取消
                        </button>
                        <button type="button" class="btn btn-primary" onclick="addItem()">
                            <i class="bi bi-save me-2"></i>保存
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <style>
        .modal-content {
            transition: transform 0.3s ease-out;
        }
        .modal-header {
            border-bottom: 2px solid rgba(255,255,255,0.1);
        }
        </style>

        <script>
        // 增强表单验证
        function addItem() {
            const form = document.getElementById('addForm');
            if (!form.checkValidity()) {
                form.classList.add('was-validated');
                return;
            }
            const form = document.getElementById('addForm');
            const tbody = document.getElementById('dataBody');
            
            const newRow = `
                <tr>
                    <td><input type="checkbox"></td>
                    <td>${form.indexName.value}</td>
                    <td>${form.field.value}</td>
                    <td>${form.fieldName.value}</td>
                </tr>`;
            
            tbody.insertAdjacentHTML('beforeend', newRow);
            bootstrap.Modal.getInstance(document.getElementById('addModal')).hide();
            form.reset();
            showToast('添加成功');
        }
        
        // 新增成功提示
        function showToast(message) {
            const toast = `<div class="toast align-items-center text-white bg-success border-0 position-fixed bottom-0 end-0 m-3">
                <div class="d-flex">
                    <div class="toast-body">${message}</div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                </div>
            </div>`;
            document.body.insertAdjacentHTML('beforeend', toast);
            new bootstrap.Toast(document.querySelector('.toast')).show();
        }
        </script>
    </div>

    <!-- 引入 Bootstrap JS -->
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        // 全选/反选
        function toggleSelectAll(checkbox) {
            const checkboxes = document.querySelectorAll('tbody input[type="checkbox"]');
            checkboxes.forEach(cb => cb.checked = checkbox.checked);
        }

        // 添加数据
        function addItem() {
            const form = document.getElementById('addForm');
            const tbody = document.getElementById('dataBody');
            
            const newRow = `
                <tr>
                    <td><input type="checkbox"></td>
                    <td>${form.indexName.value}</td>
                    <td>${form.field.value}</td>
                    <td>${form.fieldName.value}</td>
                </tr>`;
            
            tbody.insertAdjacentHTML('beforeend', newRow);
            bootstrap.Modal.getInstance(document.getElementById('addModal')).hide();
            form.reset();
        }

        // 删除选中
        function deleteSelected() {
            const checkboxes = document.querySelectorAll('tbody input[type="checkbox"]:checked');
            checkboxes.forEach(checkbox => {
                checkbox.closest('tr').remove();
            });
        }
    </script>
</body>
</html>